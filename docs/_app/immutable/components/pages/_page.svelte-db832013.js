import{H as get_store_value,S as SvelteComponent,i as init,s as safe_not_equal,k as element,a as space,l as claim_element,m as children,h as detach,c as claim_space,n as attr,I as src_url_equal,p as set_style,b as insert_hydration,F as append_hydration,A as noop,J as listen,f as transition_in,g as group_outros,t as transition_out,d as check_outros,e as empty,q as text,r as claim_text,u as set_data,K as binding_callbacks,L as bind,v as create_component,w as claim_component,x as mount_component,M as add_flush_callback,y as destroy_component,B as create_slot,C as update_slot_base,D as get_all_dirty_from_scope,E as get_slot_changes,N as createEventDispatcher,o as onMount,O as destroy_each,P as null_to_empty,Q as run_all}from"../../chunks/index-84d8f33d.js";import{b as blockUpgrades,U as URL_PREFIX,f as findBlockUpgradeByNamespace,B as BlockUtil}from"../../chunks/blockUtil-f88e665a.js";import{w as writable}from"../../chunks/index-fb331314.js";const locale_en_us={key:"en-us",language:"English",strings:{"splash-header":"Did you know?"},blockUpgrades:{dirt:{title:"Dirt",description:""},grass:{title:"Grass",description:""},log:{title:"Log",description:""},stone:{title:"Stone",description:""},cobblestone:{title:"Cobblestone",description:""}},otherUpgrades:{"pickaxe-wood":{title:"Wooden Pickaxe",description:""}},splashes:["Click the block!","Hi!"]},locale_pl_pl={key:"pl-pl",language:"Polski",strings:{"splash-header":"Czy wiesz \u017Ce?"},blockUpgrades:{dirt:{title:"Ziemia",description:""},grass:{title:"Trawa",description:""},log:{title:"K\u0142oda",description:""},stone:{title:"Kamie\u0144",description:""},cobblestone:{title:"Bruk",description:""}},otherUpgrades:{"pickaxe-wood":{title:"Drewniany Kilof",description:""}},splashes:["Klikaj w blok!","Witaj!"]};Array.prototype.pick=function(){return this[Math.floor(Math.random()*this.length)]};Array.prototype.last=function(){return this[this.length-1]};const DEFAULT_LANGUAGE="en-us";let currentLanguage=DEFAULT_LANGUAGE;const AVALIBLE_LOCALES=[locale_pl_pl,locale_en_us];function getLocalizedBlockUpgrade(n){let e=getCurrentLocale().blockUpgrades[n];return e||(e=getDefaultLocale().blockUpgrades[n]),e}function getLocalizedOtherUpgrade(n){let e=getCurrentLocale().otherUpgrades[n];return e||(e=getDefaultLocale().otherUpgrades[n]),e}function getRandomSplash(){return getCurrentLocale().splashes.pick()}function getLocalizedString(n,e){let t=getCurrentLocale().strings[n];return t||(t=getDefaultLocale().strings[n]),t!=null?t:e}function getCurrentLocale(){var n;return(n=getLocaleByKey(currentLanguage))!=null?n:getLocaleByKey(DEFAULT_LANGUAGE)}function getDefaultLocale(){return getLocaleByKey(DEFAULT_LANGUAGE)}function getLocaleByKey(n){return AVALIBLE_LOCALES.find(e=>e.key===n)}class IllegalStateError extends Error{constructor(e,t){super(e,t),this.name="IllegalStateError"}}let blocks=writable(0),multiplier=writable(1),bps=writable(0),blockUpgradeIndex=writable(0),pickUpgradeIndex=writable(-1);const saveEntries=[blocks,multiplier,bps,blockUpgradeIndex,pickUpgradeIndex],SAVE_SLOT="save";let hasLoadedGame=!1;function prepareAutosave(){saveEntries.forEach(n=>{n.subscribe(saveGame)})}function saveGame(){if(!!hasLoadedGame){try{if(!localStorage)return}catch{return}localStorage.setItem(SAVE_SLOT,JSON.stringify({blocks:get_store_value(blocks),multiplier:get_store_value(multiplier),bps:get_store_value(bps),blockUpgradeIndex:get_store_value(blockUpgradeIndex),pickUpgradeIndex:get_store_value(pickUpgradeIndex)}))}}function loadGame(){var e,t,l,i,r,s,c;let n=JSON.parse((e=localStorage.getItem(SAVE_SLOT))!=null?e:"{}");n&&(blocks.set((t=n.blocks)!=null?t:0),multiplier.set((l=n.multiplier)!=null?l:1),bps.set((i=n.bps)!=null?i:0),blockUpgradeIndex.set((r=n.blockUpgradeIndex)!=null?r:0),pickUpgradeIndex.set((s=n.pickUpgradeIndex)!=null?s:-1),BlockUpgradeManager.setBaseBlockUpgradeIndex((c=n.blockUpgradeIndex)!=null?c:0),hasLoadedGame=!0)}function clearSave(){hasLoadedGame=!1,localStorage.removeItem(SAVE_SLOT),location.reload()}let baseBlockUpgradeIndex=0;class BlockUpgradeManager{constructor(e,t,l,i,r){this.left=e,this.top=t,this.right=l,this.getters=i,this.setters=r,blockUpgradeIndex.set(baseBlockUpgradeIndex),this.ForceApplyBlockUpgrade(blockUpgrades[baseBlockUpgradeIndex],!0)}static setBaseBlockUpgradeIndex(e){console.log(e),baseBlockUpgradeIndex=e}static toArbitiaryBlock(e){var i;let t=(i=getLocalizedBlockUpgrade(e.namespace))!=null?i:{title:void 0,description:void 0},l=`${URL_PREFIX}/img/placeholder.png`;switch(e.textureMode){case"all":l=`${URL_PREFIX}/img/blocks/${e.namespace}/all.${e.imageExtension}`;break;case"bottomtop":l=`${URL_PREFIX}/img/blocks/${e.namespace}/bottom.${e.imageExtension}`;break;case"sided":l=`${URL_PREFIX}/img/blocks/${e.namespace}/left.${e.imageExtension}`;break}return{description:t.description,title:t.title,namespace:e.namespace,icon:l,price:e.price,upgradeValues:e.upgradeValues,isBlockUpgrade:!0}}static fromArbitiaryBlock(e){return blockUpgrades.find(t=>t.namespace===e.namespace)}GetBlockUpgradeIndex(){return get_store_value(blockUpgradeIndex)}GetBlockUpgrade(){return blockUpgrades[this.GetBlockUpgradeIndex()]}GetNextBlockUpgrade(){return blockUpgrades[this.GetBlockUpgradeIndex()+1]}GetNextBlockUpgradeSure(){return this.GetNextBlockUpgrade()}ApplyBlockUpgrade(e){return e&&this.getters.getBlocks()>=e.price&&!e.isDisabled?(this.ForceApplyBlockUpgrade(e),!0):!1}ForceApplyBlockUpgrade(e,t=!1){switch(t||(this.setters.setBlocks(this.getters.getBlocks()-e.price),this.setters.setBps(this.getters.getBps()+e.upgradeValues.bps),this.setters.setMultiplier(this.getters.getMultiplier()+e.upgradeValues.multiplier)),console.log(e),e.textureMode){case"all":this.left.src=`${URL_PREFIX}/img/blocks/${e.namespace}/all.jpg`,this.top.src=`${URL_PREFIX}/img/blocks/${e.namespace}/all.jpg`,this.right.src=`${URL_PREFIX}/img/blocks/${e.namespace}/all.jpg`,this.setFavicon(`${URL_PREFIX}/img/blocks/${e.namespace}/all.jpg`);break;case"bottomtop":this.left.src=`${URL_PREFIX}/img/blocks/${e.namespace}/bottom.jpg`,this.top.src=`${URL_PREFIX}/img/blocks/${e.namespace}/top.jpg`,this.right.src=`${URL_PREFIX}/img/blocks/${e.namespace}/bottom.jpg`,this.setFavicon(`${URL_PREFIX}/img/blocks/${e.namespace}/bottom.jpg`);break;case"sided":this.left.src=`${URL_PREFIX}/img/blocks/${e.namespace}/left.jpg`,this.top.src=`${URL_PREFIX}/img/blocks/${e.namespace}/top.jpg`,this.right.src=`${URL_PREFIX}/img/blocks/${e.namespace}/right.jpg`,this.setFavicon(`${URL_PREFIX}/img/blocks/${e.namespace}/left.jpg`);break}if(!findBlockUpgradeByNamespace(e.namespace))throw new IllegalStateError(`Upgrade with namespace "${e.namespace} is not registered`);blockUpgradeIndex.set(blockUpgrades.findIndex(l=>l.namespace===e.namespace))}setFavicon(e){var t=document.querySelector("link[rel~='icon']");t||(t=document.createElement("link"),t.rel="icon",document.getElementsByTagName("head")[0].appendChild(t)),t.href=e}}const pickaxeUpgrades=[{namespace:"pickaxe-wood",imageExtension:"png",price:100,upgradeValues:{bps:.2,multiplier:.1}}];class OtherUpgradeManager{static toArbitiaryUpgrade(e){var i;if(!e)return;let t=(i=getLocalizedOtherUpgrade(e.namespace))!=null?i:{title:void 0,description:void 0},l=`${URL_PREFIX}/img/other/${e.namespace}.${e.imageExtension}`;return{description:t.description,title:t.title,namespace:e.namespace,icon:l,price:e.price,upgradeValues:e.upgradeValues,isBlockUpgrade:!1}}static getNextPickUpgrade(){return pickaxeUpgrades[get_store_value(pickUpgradeIndex)+1]}static upgradePickToNext(){pickUpgradeIndex.update(e=>e+1),this.adjustValuesForUpgrade(pickaxeUpgrades[get_store_value(pickUpgradeIndex)])}static adjustValuesForUpgrade(e){!e||(blocks.update(t=>t-e.price),bps.update(t=>t+e.upgradeValues.bps),multiplier.update(t=>t+e.upgradeValues.multiplier))}}const RenderBlock_svelte_svelte_type_style_lang="";function create_fragment$9(n){let e,t,l,i,r,s,c,o,p,d,u,_,h;return{c(){e=element("div"),t=element("div"),l=element("div"),i=element("img"),s=space(),c=element("div"),o=element("img"),d=space(),u=element("div"),_=element("img"),this.h()},l(f){e=claim_element(f,"DIV",{class:!0,style:!0});var m=children(e);t=claim_element(m,"DIV",{class:!0,style:!0});var g=children(t);l=claim_element(g,"DIV",{class:!0});var y=children(l);i=claim_element(y,"IMG",{alt:!0,draggable:!0,src:!0,class:!0}),y.forEach(detach),s=claim_space(g),c=claim_element(g,"DIV",{class:!0});var w=children(c);o=claim_element(w,"IMG",{alt:!0,draggable:!0,src:!0,class:!0}),w.forEach(detach),d=claim_space(g),u=claim_element(g,"DIV",{class:!0});var $=children(u);_=claim_element($,"IMG",{alt:!0,draggable:!0,src:!0,class:!0}),$.forEach(detach),g.forEach(detach),m.forEach(detach),this.h()},h(){attr(i,"alt",""),attr(i,"draggable","false"),src_url_equal(i.src,r=n[2])||attr(i,"src",r),attr(i,"class","svelte-14w4oxp"),attr(l,"class","right svelte-14w4oxp"),attr(o,"alt",""),attr(o,"draggable","false"),src_url_equal(o.src,p=n[1])||attr(o,"src",p),attr(o,"class","svelte-14w4oxp"),attr(c,"class","left svelte-14w4oxp"),attr(_,"alt",""),attr(_,"draggable","false"),src_url_equal(_.src,h=n[3])||attr(_,"src",h),attr(_,"class","svelte-14w4oxp"),attr(u,"class","top svelte-14w4oxp"),attr(t,"class","block-render svelte-14w4oxp"),set_style(t,"width","100%"),set_style(t,"height","100%"),attr(e,"class","block-render-wrap"),attr(e,"style",n[0])},m(f,m){insert_hydration(f,e,m),append_hydration(e,t),append_hydration(t,l),append_hydration(l,i),append_hydration(t,s),append_hydration(t,c),append_hydration(c,o),append_hydration(t,d),append_hydration(t,u),append_hydration(u,_)},p(f,[m]){m&4&&!src_url_equal(i.src,r=f[2])&&attr(i,"src",r),m&2&&!src_url_equal(o.src,p=f[1])&&attr(o,"src",p),m&8&&!src_url_equal(_.src,h=f[3])&&attr(_,"src",h),m&1&&attr(e,"style",f[0])},i:noop,o:noop,d(f){f&&detach(e)}}}function instance$9(n,e,t){let{namespace:l="_null"}=e,{style:i=""}=e,r=blockUpgrades.find(d=>d.namespace===(l!=null?l:"_null")),s="",c="",o="";s=BlockUtil.GetBlockTexture(r,"left"),c=BlockUtil.GetBlockTexture(r,"right"),o=BlockUtil.GetBlockTexture(r,"top");function p(){r=blockUpgrades.find(d=>d.namespace===(l!=null?l:"_null")),t(1,s=BlockUtil.GetBlockTexture(r,"left")),t(2,c=BlockUtil.GetBlockTexture(r,"right")),t(3,o=BlockUtil.GetBlockTexture(r,"top"))}return n.$$set=d=>{"namespace"in d&&t(4,l=d.namespace),"style"in d&&t(0,i=d.style)},n.$$.update=()=>{n.$$.dirty&16&&p()},[i,s,c,o,l]}class RenderBlock extends SvelteComponent{constructor(e){super(),init(this,e,instance$9,create_fragment$9,safe_not_equal,{namespace:4,style:0})}}const upgrade_svelte_svelte_type_style_lang="";function create_if_block_4$1(n){let e,t,l,i;const r=[create_if_block_5$1,create_else_block_2],s=[];function c(o,p){return o[0].isBlockUpgrade?0:1}return e=c(n),t=s[e]=r[e](n),{c(){t.c(),l=empty()},l(o){t.l(o),l=empty()},m(o,p){s[e].m(o,p),insert_hydration(o,l,p),i=!0},p(o,p){let d=e;e=c(o),e===d?s[e].p(o,p):(group_outros(),transition_out(s[d],1,1,()=>{s[d]=null}),check_outros(),t=s[e],t?t.p(o,p):(t=s[e]=r[e](o),t.c()),transition_in(t,1),t.m(l.parentNode,l))},i(o){i||(transition_in(t),i=!0)},o(o){transition_out(t),i=!1},d(o){s[e].d(o),o&&detach(l)}}}function create_else_block_2(n){let e,t;return{c(){e=element("img"),this.h()},l(l){e=claim_element(l,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){var l;attr(e,"class","upgrade-img svelte-1s16een"),src_url_equal(e.src,t=((l=n[0])!=null?l:{icon:`${URL_PREFIX}/img/placeholder.png`}).icon)||attr(e,"src",t),attr(e,"alt","upgrade icon")},m(l,i){insert_hydration(l,e,i)},p(l,i){var r;i&1&&!src_url_equal(e.src,t=((r=l[0])!=null?r:{icon:`${URL_PREFIX}/img/placeholder.png`}).icon)&&attr(e,"src",t)},i:noop,o:noop,d(l){l&&detach(e)}}}function create_if_block_5$1(n){let e,t,l;function i(s){n[6](s)}let r={style:"position: relative; transform: scale(.7) translate(30%, -100%); top: 35%"};return n[5]!==void 0&&(r.namespace=n[5]),e=new RenderBlock({props:r}),binding_callbacks.push(()=>bind(e,"namespace",i)),{c(){create_component(e.$$.fragment)},l(s){claim_component(e.$$.fragment,s)},m(s,c){mount_component(e,s,c),l=!0},p(s,c){const o={};!t&&c&32&&(t=!0,o.namespace=s[5],add_flush_callback(()=>t=!1)),e.$set(o)},i(s){l||(transition_in(e.$$.fragment,s),l=!0)},o(s){transition_out(e.$$.fragment,s),l=!1},d(s){destroy_component(e,s)}}}function create_else_block_1(n){let e,t,l,i,r;return{c(){e=element("h1"),t=text(n[2]),l=space(),i=element("div"),r=text("You have reached max level."),this.h()},l(s){e=claim_element(s,"H1",{class:!0});var c=children(e);t=claim_text(c,n[2]),c.forEach(detach),l=claim_space(s),i=claim_element(s,"DIV",{});var o=children(i);r=claim_text(o,"You have reached max level."),o.forEach(detach),this.h()},h(){attr(e,"class","svelte-1s16een")},m(s,c){insert_hydration(s,e,c),append_hydration(e,t),insert_hydration(s,l,c),insert_hydration(s,i,c),append_hydration(i,r)},p(s,c){c&4&&set_data(t,s[2])},d(s){s&&detach(e),s&&detach(l),s&&detach(i)}}}function create_if_block_2$1(n){let e;function t(r,s){return r[0].namespace!=="_null"?create_if_block_3$1:create_else_block}let l=t(n),i=l(n);return{c(){i.c(),e=empty()},l(r){i.l(r),e=empty()},m(r,s){i.m(r,s),insert_hydration(r,e,s)},p(r,s){l===(l=t(r))&&i?i.p(r,s):(i.d(1),i=l(r),i&&(i.c(),i.m(e.parentNode,e)))},d(r){i.d(r),r&&detach(e)}}}function create_else_block(n){let e,t,l,i,r;return{c(){e=element("h1"),t=text(n[2]),l=space(),i=element("div"),r=text("You have reached max level."),this.h()},l(s){e=claim_element(s,"H1",{class:!0});var c=children(e);t=claim_text(c,n[2]),c.forEach(detach),l=claim_space(s),i=claim_element(s,"DIV",{});var o=children(i);r=claim_text(o,"You have reached max level."),o.forEach(detach),this.h()},h(){attr(e,"class","svelte-1s16een")},m(s,c){insert_hydration(s,e,c),append_hydration(e,t),insert_hydration(s,l,c),insert_hydration(s,i,c),append_hydration(i,r)},p(s,c){c&4&&set_data(t,s[2])},d(s){s&&detach(e),s&&detach(l),s&&detach(i)}}}function create_if_block_3$1(n){let e,t,l,i,r,s=n[0].title+"",c;return{c(){e=element("h1"),t=text(n[2]),l=space(),i=element("div"),r=text("Upgrade to "),c=text(s),this.h()},l(o){e=claim_element(o,"H1",{class:!0});var p=children(e);t=claim_text(p,n[2]),p.forEach(detach),l=claim_space(o),i=claim_element(o,"DIV",{});var d=children(i);r=claim_text(d,"Upgrade to "),c=claim_text(d,s),d.forEach(detach),this.h()},h(){attr(e,"class","svelte-1s16een")},m(o,p){insert_hydration(o,e,p),append_hydration(e,t),insert_hydration(o,l,p),insert_hydration(o,i,p),append_hydration(i,r),append_hydration(i,c)},p(o,p){p&4&&set_data(t,o[2]),p&1&&s!==(s=o[0].title+"")&&set_data(c,s)},d(o){o&&detach(e),o&&detach(l),o&&detach(i)}}}function create_if_block$3(n){let e,t=n[0].namespace!=="_null"&&create_if_block_1$1(n);return{c(){t&&t.c(),e=empty()},l(l){t&&t.l(l),e=empty()},m(l,i){t&&t.m(l,i),insert_hydration(l,e,i)},p(l,i){l[0].namespace!=="_null"?t?t.p(l,i):(t=create_if_block_1$1(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(l){t&&t.d(l),l&&detach(e)}}}function create_if_block_1$1(n){var i;let e=((i=n[0])==null?void 0:i.price)+"",t,l;return{c(){t=text(e),l=text(" blocks")},l(r){t=claim_text(r,e),l=claim_text(r," blocks")},m(r,s){insert_hydration(r,t,s),insert_hydration(r,l,s)},p(r,s){var c;s&1&&e!==(e=((c=r[0])==null?void 0:c.price)+"")&&set_data(t,e)},d(r){r&&detach(t),r&&detach(l)}}}function create_fragment$8(n){let e,t,l,i,r,s,c,o,p,d=n[0]&&create_if_block_4$1(n);function u(m,g){return m[0]?create_if_block_2$1:create_else_block_1}let _=u(n),h=_(n),f=n[0]&&create_if_block$3(n);return{c(){e=element("div"),t=element("div"),d&&d.c(),l=space(),i=element("div"),h.c(),r=space(),s=element("div"),f&&f.c(),this.h()},l(m){e=claim_element(m,"DIV",{class:!0});var g=children(e);t=claim_element(g,"DIV",{class:!0});var y=children(t);d&&d.l(y),y.forEach(detach),l=claim_space(g),i=claim_element(g,"DIV",{class:!0});var w=children(i);h.l(w),w.forEach(detach),r=claim_space(g),s=claim_element(g,"DIV",{class:!0});var $=children(s);f&&f.l($),$.forEach(detach),g.forEach(detach),this.h()},h(){attr(t,"class","left-side svelte-1s16een"),attr(i,"class","right-side"),attr(s,"class","bottom-right svelte-1s16een"),attr(e,"class","upgrade svelte-1s16een")},m(m,g){insert_hydration(m,e,g),append_hydration(e,t),d&&d.m(t,null),append_hydration(e,l),append_hydration(e,i),h.m(i,null),append_hydration(e,r),append_hydration(e,s),f&&f.m(s,null),n[7](e),c=!0,o||(p=listen(e,"click",n[8]),o=!0)},p(m,[g]){m[0]?d?(d.p(m,g),g&1&&transition_in(d,1)):(d=create_if_block_4$1(m),d.c(),transition_in(d,1),d.m(t,null)):d&&(group_outros(),transition_out(d,1,1,()=>{d=null}),check_outros()),_===(_=u(m))&&h?h.p(m,g):(h.d(1),h=_(m),h&&(h.c(),h.m(i,null))),m[0]?f?f.p(m,g):(f=create_if_block$3(m),f.c(),f.m(s,null)):f&&(f.d(1),f=null)},i(m){c||(transition_in(d),c=!0)},o(m){transition_out(d),c=!1},d(m){m&&detach(e),d&&d.d(),h.d(),f&&f.d(),n[7](null),o=!1,p()}}}function instance$8(n,e,t){let{upgrade:l}=e,{onUpgrade:i}=e,{title:r=l?l.title:""}=e,{isExpesnive:s=!1}=e,c="",o;function p(_){c=_,t(5,c),t(0,l)}function d(_){binding_callbacks[_?"unshift":"push"](()=>{o=_,t(4,o)})}const u=()=>l&&!s?i(l):null;return n.$$set=_=>{"upgrade"in _&&t(0,l=_.upgrade),"onUpgrade"in _&&t(1,i=_.onUpgrade),"title"in _&&t(2,r=_.title),"isExpesnive"in _&&t(3,s=_.isExpesnive)},n.$$.update=()=>{n.$$.dirty&25&&o&&(s||!l?o.setAttribute("expensive",""):o.removeAttribute("expensive")),n.$$.dirty&1&&l&&t(5,c=l.namespace)},[l,i,r,s,o,c,p,d,u]}class Upgrade extends SvelteComponent{constructor(e){super(),init(this,e,instance$8,create_fragment$8,safe_not_equal,{upgrade:0,onUpgrade:1,title:2,isExpesnive:3})}}try{window&&patchWindowExtensions()}catch{}function patchWindowExtensions(){window.mobileCheck=function(){let n=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(n=!0)}(navigator.userAgent||navigator.vendor||window.opera),n},window.mobileAndTabletCheck=function(){let n=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(n=!0)}(navigator.userAgent||navigator.vendor||window.opera),n}}const VERSION_POPUP_SLOT="versionPopupShownForVersion",VERSION="5",NEW_FEATS=["New upgrade path: Pickaxes!","Added this popup","Mobile gameplay improvement","Bug fixes"];let versionPopupShownForVersion=writable("");function initializeVersionInfo(){var n;versionPopupShownForVersion.set((n=localStorage.getItem(VERSION_POPUP_SLOT))!=null?n:""),versionPopupShownForVersion.subscribe(e=>localStorage.setItem(VERSION_POPUP_SLOT,e))}let flags=writable({allow_negative:0,always_show_update_notes:0});var Flags;(n=>{function e(o){return get_store_value(flags)[o]}n.getFlagValue=e;function t(o){return e(o)>0}n.isFlagEnabled=t;function l(){return get_store_value(flags)}n.getFlags=l;function i(o,p){flags.update(d=>{let u=d;return u[o]=p,u})}n.setFlagValue=i;function r(o,p){i(o,p?1:0)}n.setFlagEnabled=r;function s(o){return Object.keys(get_store_value(flags)).includes(o)}n.flagExists=s;function c(){let o=localStorage.getItem("flags");o&&flags.set(JSON.parse(o)),flags.subscribe(p=>{try{if(!localStorage)return}catch{return}localStorage.setItem("flags",JSON.stringify(p))})}n.loadFlags=c,(o=>{function p(){ConsoleManager.log("Flag configuration changed."),ConsoleManager.log("To apply flag configuration type command /reload to reload page.")}function d(u){switch(u[1]){case"set":if(u.length<4){ConsoleManager.consoleError("Missing arguments");return}s(u[2])&&(i(u[2],parseInt(u[3])),ConsoleManager.log(`Flag "${u[2]}" has been set to ${u[3]}`),p());break;case"get":if(u.length<3){ConsoleManager.consoleError("Missing arguments");return}s(u[2])&&ConsoleManager.log(`Flag "${u[2]}" has value ${e(u[2])}`);break;case"list":ConsoleManager.log("<br> Currently availble flags: <br><br>"+Object.entries(get_store_value(flags)).map(_=>`${_[0]}: ${_[1]}`).join("<br>")+"<br>");break}}o.execute=d})(n.Command||(n.Command={}))})(Flags||(Flags={}));let ogConsole={log:console.log,error:console.error,warn:console.warn,debug:console.debug};var ConsoleManager;(ConsoleManager=>{let loggingStarted=!1,listensForErrors=!1;ConsoleManager.logEntries=[];let listeners=[];function startLogging(){loggingStarted||(ogConsole.log=console.log,ogConsole.error=console.error,ogConsole.warn=console.warn,ogConsole.debug=console.debug,console.log=log,console.warn=warn,console.error=consoleError,console.debug=debug,listensForErrors||(window.addEventListener("error",error),listensForErrors=!0),loggingStarted=!0)}ConsoleManager.startLogging=startLogging;function stopLogging(){!loggingStarted||(console.log=ogConsole.log,console.error=ogConsole.error,console.warn=ogConsole.warn,console.debug=ogConsole.debug,loggingStarted=!1)}ConsoleManager.stopLogging=stopLogging;function addListener(n){listeners.push(n)}ConsoleManager.addListener=addListener;function executeCommand(command){var n;if(!command.startsWith("/")){log(eval(command));return}let parsed=command.substring(1).replace(`
`,"").trim().split(" ");switch(parsed[0].toLowerCase()){case"blocks":let e=0;parsed.length<2?e=+((n=window.prompt("Input amount"))!=null?n:"0"):e=+parsed[1],blocks.set(e),log(`Setted ${e} blocks`);break;case"logging":switch(parsed.length<2&&log("Logging is "+(loggingStarted?"enabled":"disabled")),parsed[1]){case"disable":stopLogging(),log("Disabled logging");break;case"enable":startLogging(),log("Enabled logging");break}break;case"flag":Flags.Command.execute(parsed);break;case"reload":location.reload();break;default:warn("Command not found");break}}ConsoleManager.executeCommand=executeCommand;function log(...n){ogConsole.log(...n),ConsoleManager.logEntries.push({type:"log",messages:n,time:Date.now()}),callListeners()}ConsoleManager.log=log;function warn(...n){ogConsole.log(...n),ConsoleManager.logEntries.push({type:"warn",messages:n,time:Date.now()}),callListeners()}ConsoleManager.warn=warn;function debug(...n){ogConsole.log(...n),ConsoleManager.logEntries.push({type:"debug",messages:n,time:Date.now()}),callListeners()}ConsoleManager.debug=debug;function consoleError(...n){ogConsole.log(...n),ConsoleManager.logEntries.push({type:"consoleerror",messages:n,time:Date.now()}),callListeners()}ConsoleManager.consoleError=consoleError;function error(n){ConsoleManager.logEntries.push({type:"error",messages:[n.message],time:Date.now(),errorInfo:{error:n.error,colno:n.colno,lineno:n.lineno,filename:n.filename}}),callListeners()}function callListeners(){listeners.forEach(n=>{n()})}})(ConsoleManager||(ConsoleManager={}));class LoadingManager{constructor(e,t){this.onFinishLoading=e,this.additionalTasks=t!=null?t:[]}async startLoading(){await new Promise(e=>{var t=setInterval(()=>{try{window!=null&&(clearInterval(t),e(null))}catch(l){let i=l;i.message.includes(" is not defined")||console.error(i)}},5)}),patchWindowExtensions(),await new Promise(e=>{var t=setInterval(()=>{try{document!=null&&(clearInterval(t),e(null))}catch(l){let i=l;i.message.includes(" is not defined")||console.error(i)}},5)}),ConsoleManager.startLogging(),Flags.loadFlags(),initializeVersionInfo(),loadGame(),prepareAutosave(),await this.sleep(2e3);for(let e=0;e<this.additionalTasks.length;e++){let t=this.additionalTasks[e];await t()}this.onFinishLoading()}async sleep(e){await new Promise(t=>setTimeout(()=>t(null),e))}}const loading_svelte_svelte_type_style_lang="";function create_fragment$7(n){let e,t,l,i,r,s,c,o,p,d,u,_,h,f,m,g,y,w,$,C,P,K,D,x,R,j,O,S,V,N,M,F,G=getLocalizedString("splash-header","header")+"",q,A,z=getRandomSplash()+"",X;return{c(){e=element("div"),t=element("div"),i=space(),r=element("h1"),s=text("Block Clicker"),c=space(),o=element("div"),p=element("div"),d=element("div"),u=element("div"),_=element("img"),f=space(),m=element("div"),g=element("img"),w=space(),$=element("div"),C=element("img"),K=space(),D=element("div"),x=element("img"),j=space(),O=element("div"),S=element("img"),N=space(),M=element("div"),F=element("h1"),q=text(G),A=space(),X=text(z),this.h()},l(L){e=claim_element(L,"DIV",{class:!0});var I=children(e);t=claim_element(I,"DIV",{class:!0,src:!0,style:!0});var B=children(t);B.forEach(detach),i=claim_space(I),r=claim_element(I,"H1",{class:!0});var v=children(r);s=claim_text(v,"Block Clicker"),v.forEach(detach),c=claim_space(I),o=claim_element(I,"DIV",{class:!0,style:!0});var U=children(o);p=claim_element(U,"DIV",{class:!0});var b=children(p);d=claim_element(b,"DIV",{class:!0});var E=children(d);u=claim_element(E,"DIV",{class:!0});var H=children(u);_=claim_element(H,"IMG",{alt:!0,draggable:!0,src:!0,class:!0}),H.forEach(detach),f=claim_space(E),m=claim_element(E,"DIV",{class:!0});var W=children(m);g=claim_element(W,"IMG",{alt:!0,draggable:!0,src:!0,class:!0}),W.forEach(detach),w=claim_space(E),$=claim_element(E,"DIV",{class:!0});var J=children($);C=claim_element(J,"IMG",{alt:!0,draggable:!0,src:!0,class:!0}),J.forEach(detach),K=claim_space(E),D=claim_element(E,"DIV",{class:!0});var Y=children(D);x=claim_element(Y,"IMG",{alt:!0,draggable:!0,src:!0,class:!0}),Y.forEach(detach),j=claim_space(E),O=claim_element(E,"DIV",{class:!0});var Q=children(O);S=claim_element(Q,"IMG",{alt:!0,draggable:!0,src:!0,class:!0}),Q.forEach(detach),E.forEach(detach),b.forEach(detach),N=claim_space(U),M=claim_element(U,"DIV",{class:!0});var T=children(M);F=claim_element(T,"H1",{class:!0});var Z=children(F);q=claim_text(Z,G),Z.forEach(detach),A=claim_space(T),X=claim_text(T,z),T.forEach(detach),U.forEach(detach),I.forEach(detach),this.h()},h(){attr(t,"class","bg-img svelte-17ujoq1"),src_url_equal(t.src,l=n[5]())||attr(t,"src",l),set_style(t,"background-image","url("+n[5]()+")"),attr(r,"class","header svelte-17ujoq1"),attr(_,"alt",""),attr(_,"draggable","false"),src_url_equal(_.src,h=n[2])||attr(_,"src",h),attr(_,"class","svelte-17ujoq1"),attr(u,"class","backright svelte-17ujoq1"),attr(g,"alt",""),attr(g,"draggable","false"),src_url_equal(g.src,y=n[3])||attr(g,"src",y),attr(g,"class","svelte-17ujoq1"),attr(m,"class","backleft svelte-17ujoq1"),attr(C,"alt",""),attr(C,"draggable","false"),src_url_equal(C.src,P=n[1])||attr(C,"src",P),attr(C,"class","svelte-17ujoq1"),attr($,"class","right svelte-17ujoq1"),attr(x,"alt",""),attr(x,"draggable","false"),src_url_equal(x.src,R=n[0])||attr(x,"src",R),attr(x,"class","svelte-17ujoq1"),attr(D,"class","left svelte-17ujoq1"),attr(S,"alt",""),attr(S,"draggable","false"),src_url_equal(S.src,V=n[4])||attr(S,"src",V),attr(S,"class","svelte-17ujoq1"),attr(O,"class","top svelte-17ujoq1"),attr(d,"class","block-cube svelte-17ujoq1"),attr(p,"class","cube-wrapper svelte-17ujoq1"),attr(F,"class","svelte-17ujoq1"),attr(M,"class","splash svelte-17ujoq1"),attr(o,"class","bg svelte-17ujoq1"),set_style(o,"--background-image","url("+n[5]()+")"),attr(e,"class","bg svelte-17ujoq1")},m(L,I){insert_hydration(L,e,I),append_hydration(e,t),append_hydration(e,i),append_hydration(e,r),append_hydration(r,s),append_hydration(e,c),append_hydration(e,o),append_hydration(o,p),append_hydration(p,d),append_hydration(d,u),append_hydration(u,_),append_hydration(d,f),append_hydration(d,m),append_hydration(m,g),append_hydration(d,w),append_hydration(d,$),append_hydration($,C),append_hydration(d,K),append_hydration(d,D),append_hydration(D,x),append_hydration(d,j),append_hydration(d,O),append_hydration(O,S),append_hydration(o,N),append_hydration(o,M),append_hydration(M,F),append_hydration(F,q),append_hydration(M,A),append_hydration(M,X)},p(L,[I]){I&4&&!src_url_equal(_.src,h=L[2])&&attr(_,"src",h),I&8&&!src_url_equal(g.src,y=L[3])&&attr(g,"src",y),I&2&&!src_url_equal(C.src,P=L[1])&&attr(C,"src",P),I&1&&!src_url_equal(x.src,R=L[0])&&attr(x,"src",R),I&16&&!src_url_equal(S.src,V=L[4])&&attr(S,"src",V)},i:noop,o:noop,d(L){L&&detach(e)}}}function instance$7(n,e,t){let l,i,r,s,c,o=blockUpgrades.filter(d=>d.textureMode!=="sided"&&!d.isDisabled).pick();function p(){return o.textureMode==="all"?`${URL_PREFIX}/img/blocks/${o.namespace}/all.${o.imageExtension}`:`${URL_PREFIX}/img/blocks/${o.namespace}/bottom.${o.imageExtension}`}switch(o.textureMode){case"all":l=`${URL_PREFIX}/img/blocks/${o.namespace}/all.jpg`,c=`${URL_PREFIX}/img/blocks/${o.namespace}/all.jpg`,i=`${URL_PREFIX}/img/blocks/${o.namespace}/all.jpg`,r=`${URL_PREFIX}/img/blocks/${o.namespace}/all.jpg`,s=`${URL_PREFIX}/img/blocks/${o.namespace}/all.jpg`;break;case"bottomtop":l=`${URL_PREFIX}/img/blocks/${o.namespace}/bottom.jpg`,c=`${URL_PREFIX}/img/blocks/${o.namespace}/top.jpg`,i=`${URL_PREFIX}/img/blocks/${o.namespace}/bottom.jpg`,r=`${URL_PREFIX}/img/blocks/${o.namespace}/bottom.jpg`,s=`${URL_PREFIX}/img/blocks/${o.namespace}/bottom.jpg`;break}return[l,i,r,s,c,p]}class Loading extends SvelteComponent{constructor(e){super(),init(this,e,instance$7,create_fragment$7,safe_not_equal,{})}}const DebugButton_svelte_svelte_type_style_lang="";function create_fragment$6(n){let e,t,l,i,r;const s=n[2].default,c=create_slot(s,n,n[1],null);return{c(){e=element("div"),t=element("div"),c&&c.c(),this.h()},l(o){e=claim_element(o,"DIV",{class:!0});var p=children(e);t=claim_element(p,"DIV",{class:!0});var d=children(t);c&&c.l(d),d.forEach(detach),p.forEach(detach),this.h()},h(){attr(t,"class","content svelte-18avp1y"),attr(e,"class","btn svelte-18avp1y")},m(o,p){insert_hydration(o,e,p),append_hydration(e,t),c&&c.m(t,null),l=!0,i||(r=listen(e,"click",n[3]),i=!0)},p(o,[p]){c&&c.p&&(!l||p&2)&&update_slot_base(c,s,o,o[1],l?get_slot_changes(s,o[1],p,null):get_all_dirty_from_scope(o[1]),null)},i(o){l||(transition_in(c,o),l=!0)},o(o){transition_out(c,o),l=!1},d(o){o&&detach(e),c&&c.d(o),i=!1,r()}}}function instance$6(n,e,t){let{$$slots:l={},$$scope:i}=e;const r=createEventDispatcher(),s=c=>r("click",{event:c});return n.$$set=c=>{"$$scope"in c&&t(1,i=c.$$scope)},[r,i,l,s]}class DebugButton extends SvelteComponent{constructor(e){super(),init(this,e,instance$6,create_fragment$6,safe_not_equal,{})}}const PopupWrapper_svelte_svelte_type_style_lang="";function create_fragment$5(n){let e,t,l,i,r,s;const c=n[4].default,o=create_slot(c,n,n[3],null);return{c(){e=element("div"),t=element("div"),o&&o.c(),this.h()},l(p){e=claim_element(p,"DIV",{class:!0,id:!0,style:!0});var d=children(e);t=claim_element(d,"DIV",{class:!0});var u=children(t);o&&o.l(u),u.forEach(detach),d.forEach(detach),this.h()},h(){attr(t,"class","inner-parent svelte-1y4wzul"),attr(e,"class","popup svelte-1y4wzul"),attr(e,"id",n[1]),attr(e,"style",l=`z-index: ${n[0].toString()}`)},m(p,d){insert_hydration(p,e,d),append_hydration(e,t),o&&o.m(t,null),i=!0,r||(s=listen(e,"click",n[5]),r=!0)},p(p,[d]){o&&o.p&&(!i||d&8)&&update_slot_base(o,c,p,p[3],i?get_slot_changes(c,p[3],d,null):get_all_dirty_from_scope(p[3]),null),(!i||d&2)&&attr(e,"id",p[1]),(!i||d&1&&l!==(l=`z-index: ${p[0].toString()}`))&&attr(e,"style",l)},i(p){i||(transition_in(o,p),i=!0)},o(p){transition_out(o,p),i=!1},d(p){p&&detach(e),o&&o.d(p),r=!1,s()}}}function instance$5(n,e,t){let{$$slots:l={},$$scope:i}=e;const r=createEventDispatcher();let{zIndex:s}=e,{id:c=""}=e;function o(d){d.target===this&&(console.log(typeof this),r("dimissed"))}const p=function(d){o.bind(this)(d)};return n.$$set=d=>{"zIndex"in d&&t(0,s=d.zIndex),"id"in d&&t(1,c=d.id),"$$scope"in d&&t(3,i=d.$$scope)},[s,c,o,i,l,p]}class PopupWrapper extends SvelteComponent{constructor(e){super(),init(this,e,instance$5,create_fragment$5,safe_not_equal,{zIndex:0,id:1})}}const DebugMenu_svelte_svelte_type_style_lang="";function create_if_block$2(n){let e,t;return e=new DebugButton({props:{$$slots:{default:[create_default_slot_3]},$$scope:{ctx:n}}}),e.$on("click",openConsole),{c(){create_component(e.$$.fragment)},l(l){claim_component(e.$$.fragment,l)},m(l,i){mount_component(e,l,i),t=!0},p(l,i){const r={};i&16&&(r.$$scope={dirty:i,ctx:l}),e.$set(r)},i(l){t||(transition_in(e.$$.fragment,l),t=!0)},o(l){transition_out(e.$$.fragment,l),t=!1},d(l){destroy_component(e,l)}}}function create_default_slot_3(n){let e;return{c(){e=text("Open console")},l(t){e=claim_text(t,"Open console")},m(t,l){insert_hydration(t,e,l)},d(t){t&&detach(e)}}}function create_default_slot_2(n){let e;return{c(){e=text("Clear save")},l(t){e=claim_text(t,"Clear save")},m(t,l){insert_hydration(t,e,l)},d(t){t&&detach(e)}}}function create_default_slot_1(n){let e;return{c(){e=text("Add 100 blocks")},l(t){e=claim_text(t,"Add 100 blocks")},m(t,l){insert_hydration(t,e,l)},d(t){t&&detach(e)}}}function create_default_slot$3(n){let e,t,l,i=window.mobileAndTabletCheck(),r,s,c,o,p,d,u=i&&create_if_block$2(n);return c=new DebugButton({props:{$$slots:{default:[create_default_slot_2]},$$scope:{ctx:n}}}),c.$on("click",clearSave),p=new DebugButton({props:{$$slots:{default:[create_default_slot_1]},$$scope:{ctx:n}}}),p.$on("click",n[1]),{c(){e=element("h1"),t=text("Block Clicker debugmenu"),l=space(),u&&u.c(),r=space(),s=element("div"),create_component(c.$$.fragment),o=space(),create_component(p.$$.fragment),this.h()},l(_){e=claim_element(_,"H1",{style:!0});var h=children(e);t=claim_text(h,"Block Clicker debugmenu"),h.forEach(detach),l=claim_space(_),u&&u.l(_),r=claim_space(_),s=claim_element(_,"DIV",{class:!0});var f=children(s);claim_component(c.$$.fragment,f),o=claim_space(f),claim_component(p.$$.fragment,f),f.forEach(detach),this.h()},h(){set_style(e,"text-align","center"),attr(s,"class","debug-options svelte-1qybjco")},m(_,h){insert_hydration(_,e,h),append_hydration(e,t),insert_hydration(_,l,h),u&&u.m(_,h),insert_hydration(_,r,h),insert_hydration(_,s,h),mount_component(c,s,null),append_hydration(s,o),mount_component(p,s,null),d=!0},p(_,h){i&&u.p(_,h);const f={};h&16&&(f.$$scope={dirty:h,ctx:_}),c.$set(f);const m={};h&16&&(m.$$scope={dirty:h,ctx:_}),p.$set(m)},i(_){d||(transition_in(u),transition_in(c.$$.fragment,_),transition_in(p.$$.fragment,_),d=!0)},o(_){transition_out(u),transition_out(c.$$.fragment,_),transition_out(p.$$.fragment,_),d=!1},d(_){_&&detach(e),_&&detach(l),u&&u.d(_),_&&detach(r),_&&detach(s),destroy_component(c),destroy_component(p)}}}function create_fragment$4(n){let e,t;return e=new PopupWrapper({props:{zIndex:999999992,id:"debug-console",$$slots:{default:[create_default_slot$3]},$$scope:{ctx:n}}}),e.$on("dimissed",n[2]),{c(){create_component(e.$$.fragment)},l(l){claim_component(e.$$.fragment,l)},m(l,i){mount_component(e,l,i),t=!0},p(l,[i]){const r={};i&16&&(r.$$scope={dirty:i,ctx:l}),e.$set(r)},i(l){t||(transition_in(e.$$.fragment,l),t=!0)},o(l){transition_out(e.$$.fragment,l),t=!1},d(l){destroy_component(e,l)}}}function openConsole(){document.dispatchEvent(new KeyboardEvent("keydown",{ctrlKey:!0,altKey:!0,key:"F2",code:"F2",which:113,keyCode:113,location:0})),document.dispatchEvent(new KeyboardEvent("keyup",{ctrlKey:!0,altKey:!0,key:"F2",code:"F2",which:113,keyCode:113,location:0}))}function instance$4(n){const e=createEventDispatcher();return[e,()=>blocks.update(i=>i+100),function(i){e("dimissed")}]}class DebugMenu extends SvelteComponent{constructor(e){super(),init(this,e,instance$4,create_fragment$4,safe_not_equal,{})}}var isff=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function addEvent(n,e,t,l){n.addEventListener?n.addEventListener(e,t,l):n.attachEvent&&n.attachEvent("on".concat(e),function(){t(window.event)})}function getMods(n,e){for(var t=e.slice(0,e.length-1),l=0;l<t.length;l++)t[l]=n[t[l].toLowerCase()];return t}function getKeys(n){typeof n!="string"&&(n=""),n=n.replace(/\s/g,"");for(var e=n.split(","),t=e.lastIndexOf("");t>=0;)e[t-1]+=",",e.splice(t,1),t=e.lastIndexOf("");return e}function compareArray(n,e){for(var t=n.length>=e.length?n:e,l=n.length>=e.length?e:n,i=!0,r=0;r<t.length;r++)l.indexOf(t[r])===-1&&(i=!1);return i}var _keyMap={backspace:8,"\u232B":8,tab:9,clear:12,enter:13,"\u21A9":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21EA":20,",":188,".":190,"/":191,"`":192,"-":isff?173:189,"=":isff?61:187,";":isff?59:186,"'":222,"[":219,"]":221,"\\":220},_modifier={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},modifierMap={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},_mods={16:!1,18:!1,17:!1,91:!1},_handlers={};for(var k=1;k<20;k++)_keyMap["f".concat(k)]=111+k;var _downKeys=[],winListendFocus=!1,_scope="all",elementHasBindEvent=[],code=function n(e){return _keyMap[e.toLowerCase()]||_modifier[e.toLowerCase()]||e.toUpperCase().charCodeAt(0)},getKey=function n(e){return Object.keys(_keyMap).find(function(t){return _keyMap[t]===e})},getModifier=function n(e){return Object.keys(_modifier).find(function(t){return _modifier[t]===e})};function setScope(n){_scope=n||"all"}function getScope(){return _scope||"all"}function getPressedKeyCodes(){return _downKeys.slice(0)}function getPressedKeyString(){return _downKeys.map(function(n){return getKey(n)||getModifier(n)||String.fromCharCode(n)})}function filter(n){var e=n.target||n.srcElement,t=e.tagName,l=!0;return(e.isContentEditable||(t==="INPUT"||t==="TEXTAREA"||t==="SELECT")&&!e.readOnly)&&(l=!1),l}function isPressed(n){return typeof n=="string"&&(n=code(n)),_downKeys.indexOf(n)!==-1}function deleteScope(n,e){var t,l;n||(n=getScope());for(var i in _handlers)if(Object.prototype.hasOwnProperty.call(_handlers,i))for(t=_handlers[i],l=0;l<t.length;)t[l].scope===n?t.splice(l,1):l++;getScope()===n&&setScope(e||"all")}function clearModifier(n){var e=n.keyCode||n.which||n.charCode,t=_downKeys.indexOf(e);if(t>=0&&_downKeys.splice(t,1),n.key&&n.key.toLowerCase()==="meta"&&_downKeys.splice(0,_downKeys.length),(e===93||e===224)&&(e=91),e in _mods){_mods[e]=!1;for(var l in _modifier)_modifier[l]===e&&(hotkeys[l]=!1)}}function unbind(n){if(typeof n>"u")Object.keys(_handlers).forEach(function(s){return delete _handlers[s]});else if(Array.isArray(n))n.forEach(function(s){s.key&&eachUnbind(s)});else if(typeof n=="object")n.key&&eachUnbind(n);else if(typeof n=="string"){for(var e=arguments.length,t=new Array(e>1?e-1:0),l=1;l<e;l++)t[l-1]=arguments[l];var i=t[0],r=t[1];typeof i=="function"&&(r=i,i=""),eachUnbind({key:n,scope:i,method:r,splitKey:"+"})}}var eachUnbind=function n(e){var t=e.key,l=e.scope,i=e.method,r=e.splitKey,s=r===void 0?"+":r,c=getKeys(t);c.forEach(function(o){var p=o.split(s),d=p.length,u=p[d-1],_=u==="*"?"*":code(u);if(!!_handlers[_]){l||(l=getScope());var h=d>1?getMods(_modifier,p):[];_handlers[_]=_handlers[_].filter(function(f){var m=i?f.method===i:!0;return!(m&&f.scope===l&&compareArray(f.mods,h))})}})};function eventHandler(n,e,t,l){if(e.element===l){var i;if(e.scope===t||e.scope==="all"){i=e.mods.length>0;for(var r in _mods)Object.prototype.hasOwnProperty.call(_mods,r)&&(!_mods[r]&&e.mods.indexOf(+r)>-1||_mods[r]&&e.mods.indexOf(+r)===-1)&&(i=!1);(e.mods.length===0&&!_mods[16]&&!_mods[18]&&!_mods[17]&&!_mods[91]||i||e.shortcut==="*")&&e.method(n,e)===!1&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.stopPropagation&&n.stopPropagation(),n.cancelBubble&&(n.cancelBubble=!0))}}}function dispatch(n,e){var t=_handlers["*"],l=n.keyCode||n.which||n.charCode;if(!!hotkeys.filter.call(this,n)){if((l===93||l===224)&&(l=91),_downKeys.indexOf(l)===-1&&l!==229&&_downKeys.push(l),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(f){var m=modifierMap[f];n[f]&&_downKeys.indexOf(m)===-1?_downKeys.push(m):!n[f]&&_downKeys.indexOf(m)>-1?_downKeys.splice(_downKeys.indexOf(m),1):f==="metaKey"&&n[f]&&_downKeys.length===3&&(n.ctrlKey||n.shiftKey||n.altKey||(_downKeys=_downKeys.slice(_downKeys.indexOf(m))))}),l in _mods){_mods[l]=!0;for(var i in _modifier)_modifier[i]===l&&(hotkeys[i]=!0);if(!t)return}for(var r in _mods)Object.prototype.hasOwnProperty.call(_mods,r)&&(_mods[r]=n[modifierMap[r]]);n.getModifierState&&!(n.altKey&&!n.ctrlKey)&&n.getModifierState("AltGraph")&&(_downKeys.indexOf(17)===-1&&_downKeys.push(17),_downKeys.indexOf(18)===-1&&_downKeys.push(18),_mods[17]=!0,_mods[18]=!0);var s=getScope();if(t)for(var c=0;c<t.length;c++)t[c].scope===s&&(n.type==="keydown"&&t[c].keydown||n.type==="keyup"&&t[c].keyup)&&eventHandler(n,t[c],s,e);if(l in _handlers){for(var o=0;o<_handlers[l].length;o++)if((n.type==="keydown"&&_handlers[l][o].keydown||n.type==="keyup"&&_handlers[l][o].keyup)&&_handlers[l][o].key){for(var p=_handlers[l][o],d=p.splitKey,u=p.key.split(d),_=[],h=0;h<u.length;h++)_.push(code(u[h]));_.sort().join("")===_downKeys.sort().join("")&&eventHandler(n,p,s,e)}}}}function isElementBind(n){return elementHasBindEvent.indexOf(n)>-1}function hotkeys(n,e,t){_downKeys=[];var l=getKeys(n),i=[],r="all",s=document,c=0,o=!1,p=!0,d="+",u=!1;for(t===void 0&&typeof e=="function"&&(t=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(r=e.scope),e.element&&(s=e.element),e.keyup&&(o=e.keyup),e.keydown!==void 0&&(p=e.keydown),e.capture!==void 0&&(u=e.capture),typeof e.splitKey=="string"&&(d=e.splitKey)),typeof e=="string"&&(r=e);c<l.length;c++)n=l[c].split(d),i=[],n.length>1&&(i=getMods(_modifier,n)),n=n[n.length-1],n=n==="*"?"*":code(n),n in _handlers||(_handlers[n]=[]),_handlers[n].push({keyup:o,keydown:p,scope:r,mods:i,shortcut:l[c],method:t,key:l[c],splitKey:d,element:s});typeof s<"u"&&!isElementBind(s)&&window&&(elementHasBindEvent.push(s),addEvent(s,"keydown",function(_){dispatch(_,s)},u),winListendFocus||(winListendFocus=!0,addEvent(window,"focus",function(){_downKeys=[]},u)),addEvent(s,"keyup",function(_){dispatch(_,s),clearModifier(_)},u))}function trigger(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(_handlers).forEach(function(t){var l=_handlers[t].find(function(i){return i.scope===e&&i.shortcut===n});l&&l.method&&l.method()})}var _api={getPressedKeyString,setScope,getScope,deleteScope,getPressedKeyCodes,isPressed,filter,trigger,unbind,keyMap:_keyMap,modifier:_modifier,modifierMap};for(var a in _api)Object.prototype.hasOwnProperty.call(_api,a)&&(hotkeys[a]=_api[a]);if(typeof window<"u"){var _hotkeys=window.hotkeys;hotkeys.noConflict=function(n){return n&&window.hotkeys===hotkeys&&(window.hotkeys=_hotkeys),hotkeys},window.hotkeys=hotkeys}function create_fragment$3(n){let e,t,l,i,r,s,c;return{c(){e=element("span"),t=element("input"),l=space(),i=element("label"),r=text(n[1]),this.h()},l(o){e=claim_element(o,"SPAN",{});var p=children(e);t=claim_element(p,"INPUT",{type:!0,id:!0}),l=claim_space(p),i=claim_element(p,"LABEL",{for:!0});var d=children(i);r=claim_text(d,n[1]),d.forEach(detach),p.forEach(detach),this.h()},h(){attr(t,"type","checkbox"),attr(t,"id",n[2]),attr(i,"for",n[2])},m(o,p){insert_hydration(o,e,p),append_hydration(e,t),t.checked=n[0],append_hydration(e,l),append_hydration(e,i),append_hydration(i,r),s||(c=listen(t,"change",n[3]),s=!0)},p(o,[p]){p&4&&attr(t,"id",o[2]),p&1&&(t.checked=o[0]),p&2&&set_data(r,o[1]),p&4&&attr(i,"for",o[2])},i:noop,o:noop,d(o){o&&detach(e),s=!1,c()}}}function instance$3(n,e,t){let{checked:l=!1}=e,{label:i}=e,{id:r}=e;function s(){l=this.checked,t(0,l)}return n.$$set=c=>{"checked"in c&&t(0,l=c.checked),"label"in c&&t(1,i=c.label),"id"in c&&t(2,r=c.id)},[l,i,r,s]}class Checkbox extends SvelteComponent{constructor(e){super(),init(this,e,instance$3,create_fragment$3,safe_not_equal,{checked:0,label:1,id:2})}}const DebugConsole_svelte_svelte_type_style_lang="";function get_each_context$1(n,e,t){const l=n.slice();return l[16]=e[t],l}function create_if_block$1(n){let e,t;return e=new PopupWrapper({props:{zIndex:999999995,id:"debug-console",$$slots:{default:[create_default_slot$2]},$$scope:{ctx:n}}}),e.$on("dimissed",n[10]),{c(){create_component(e.$$.fragment)},l(l){claim_component(e.$$.fragment,l)},m(l,i){mount_component(e,l,i),t=!0},p(l,i){const r={};i&524318&&(r.$$scope={dirty:i,ctx:l}),e.$set(r)},i(l){t||(transition_in(e.$$.fragment,l),t=!0)},o(l){transition_out(e.$$.fragment,l),t=!1},d(l){destroy_component(e,l)}}}function create_each_block$1(n){let e,t,l,i=msToTimeFormatted(n[16].time)+"",r,s,c,o,p,d=n[16].type+"",u,_,h,f,m=n[16].messages+"",g,y;return{c(){e=element("div"),t=element("span"),l=text("["),r=text(i),s=text("]"),c=space(),o=element("span"),p=text("["),u=text(d),_=text("]"),h=space(),f=element("span"),g=space(),this.h()},l(w){e=claim_element(w,"DIV",{class:!0});var $=children(e);t=claim_element($,"SPAN",{class:!0});var C=children(t);l=claim_text(C,"["),r=claim_text(C,i),s=claim_text(C,"]"),C.forEach(detach),c=claim_space($),o=claim_element($,"SPAN",{class:!0});var P=children(o);p=claim_text(P,"["),u=claim_text(P,d),_=claim_text(P,"]"),P.forEach(detach),h=claim_space($),f=claim_element($,"SPAN",{});var K=children(f);K.forEach(detach),g=claim_space($),$.forEach(detach),this.h()},h(){attr(t,"class","time"),attr(o,"class","time"),attr(e,"class",y=null_to_empty(`log-entry log-entry-${n[16].type}`)+" svelte-1m3bqr0")},m(w,$){insert_hydration(w,e,$),append_hydration(e,t),append_hydration(t,l),append_hydration(t,r),append_hydration(t,s),append_hydration(e,c),append_hydration(e,o),append_hydration(o,p),append_hydration(o,u),append_hydration(o,_),append_hydration(e,h),append_hydration(e,f),f.innerHTML=m,append_hydration(e,g)},p(w,$){$&16&&i!==(i=msToTimeFormatted(w[16].time)+"")&&set_data(r,i),$&16&&d!==(d=w[16].type+"")&&set_data(u,d),$&16&&m!==(m=w[16].messages+"")&&(f.innerHTML=m),$&16&&y!==(y=null_to_empty(`log-entry log-entry-${w[16].type}`)+" svelte-1m3bqr0")&&attr(e,"class",y)},d(w){w&&detach(e)}}}function create_default_slot$2(n){let e,t,l,i,r,s,c,o,p,d;function u(m){n[7](m)}let _={id:"row-culling-check",label:"Row Culling"};n[2]!==void 0&&(_.checked=n[2]),t=new Checkbox({props:_}),binding_callbacks.push(()=>bind(t,"checked",u));let h=n[4],f=[];for(let m=0;m<h.length;m+=1)f[m]=create_each_block$1(get_each_context$1(n,h,m));return{c(){e=element("div"),create_component(t.$$.fragment),i=space(),r=element("div");for(let m=0;m<f.length;m+=1)f[m].c();s=space(),c=element("textarea"),this.h()},l(m){e=claim_element(m,"DIV",{class:!0});var g=children(e);claim_component(t.$$.fragment,g),g.forEach(detach),i=claim_space(m),r=claim_element(m,"DIV",{class:!0});var y=children(r);for(let w=0;w<f.length;w+=1)f[w].l(y);y.forEach(detach),s=claim_space(m),c=claim_element(m,"TEXTAREA",{spellcheck:!0,class:!0}),children(c).forEach(detach),this.h()},h(){attr(e,"class","options svelte-1m3bqr0"),attr(r,"class","console-output svelte-1m3bqr0"),attr(c,"spellcheck","false"),attr(c,"class","command-input svelte-1m3bqr0")},m(m,g){insert_hydration(m,e,g),mount_component(t,e,null),insert_hydration(m,i,g),insert_hydration(m,r,g);for(let y=0;y<f.length;y+=1)f[y].m(r,null);n[8](r),insert_hydration(m,s,g),insert_hydration(m,c,g),n[9](c),o=!0,p||(d=listen(c,"keydown",n[6]),p=!0)},p(m,g){const y={};if(!l&&g&4&&(l=!0,y.checked=m[2],add_flush_callback(()=>l=!1)),t.$set(y),g&16){h=m[4];let w;for(w=0;w<h.length;w+=1){const $=get_each_context$1(m,h,w);f[w]?f[w].p($,g):(f[w]=create_each_block$1($),f[w].c(),f[w].m(r,null))}for(;w<f.length;w+=1)f[w].d(1);f.length=h.length}},i(m){o||(transition_in(t.$$.fragment,m),o=!0)},o(m){transition_out(t.$$.fragment,m),o=!1},d(m){m&&detach(e),destroy_component(t),m&&detach(i),m&&detach(r),destroy_each(f,m),n[8](null),m&&detach(s),m&&detach(c),n[9](null),p=!1,d()}}}function create_fragment$2(n){let e,t,l=n[0]&&create_if_block$1(n);return{c(){l&&l.c(),e=empty()},l(i){l&&l.l(i),e=empty()},m(i,r){l&&l.m(i,r),insert_hydration(i,e,r),t=!0},p(i,[r]){i[0]?l?(l.p(i,r),r&1&&transition_in(l,1)):(l=create_if_block$1(i),l.c(),transition_in(l,1),l.m(e.parentNode,e)):l&&(group_outros(),transition_out(l,1,1,()=>{l=null}),check_outros())},i(i){t||(transition_in(l),t=!0)},o(i){transition_out(l),t=!1},d(i){l&&l.d(i),i&&detach(e)}}}function msToTimeFormatted(n){let e=new Date(n);return`${e.getHours()}:${normalizeDatePart(e.getMinutes())}:${normalizeDatePart(e.getSeconds())}`}function normalizeDatePart(n){return n<10?`0${n.toString()}`:n.toString()}function instance$2(n,e,t){let l,i,{visible:r=!1}=e;const s=createEventDispatcher();let c=[],o=!1,p=!0;onMount(()=>{ConsoleManager.addListener(u),o=!0});function d(){o&&r&&i&&i.scroll({behavior:"smooth",top:i.scrollHeight})}function u(){t(4,c=ConsoleManager.logEntries)}function _(y){if(l.selectionStart,y.key==="Enter"&&!y.ctrlKey){y.preventDefault();let w=l.value;t(3,l.value="",l),ConsoleManager.executeCommand(w)}y.code==="Enter"&&y.ctrlKey&&(y.preventDefault(),t(3,l.value=`
`,l))}function h(y){p=y,t(2,p)}function f(y){binding_callbacks[y?"unshift":"push"](()=>{i=y,t(1,i)})}function m(y){binding_callbacks[y?"unshift":"push"](()=>{l=y,t(3,l)})}const g=function(y){s("dimissed")};return n.$$set=y=>{"visible"in y&&t(0,r=y.visible)},n.$$.update=()=>{n.$$.dirty&1&&d(),n.$$.dirty&6&&i&&(p?i.setAttribute("row-culling",""):i.removeAttribute("row-culling"))},[r,i,p,l,c,s,_,h,f,m,g]}class DebugConsole extends SvelteComponent{constructor(e){super(),init(this,e,instance$2,create_fragment$2,safe_not_equal,{visible:0})}}const TextPopup_svelte_svelte_type_style_lang="";function create_default_slot$1(n){let e,t,l,i,r,s,c,o;const p=n[2].default,d=create_slot(p,n,n[4],null);return{c(){e=element("h1"),t=text(n[0]),l=space(),i=element("div"),r=text("Press outside of the box to dimiss"),s=space(),c=element("div"),d&&d.c(),this.h()},l(u){e=claim_element(u,"H1",{class:!0});var _=children(e);t=claim_text(_,n[0]),_.forEach(detach),l=claim_space(u),i=claim_element(u,"DIV",{class:!0});var h=children(i);r=claim_text(h,"Press outside of the box to dimiss"),h.forEach(detach),s=claim_space(u),c=claim_element(u,"DIV",{});var f=children(c);d&&d.l(f),f.forEach(detach),this.h()},h(){attr(e,"class","title svelte-t0rlbj"),attr(i,"class","subtitle svelte-t0rlbj")},m(u,_){insert_hydration(u,e,_),append_hydration(e,t),insert_hydration(u,l,_),insert_hydration(u,i,_),append_hydration(i,r),insert_hydration(u,s,_),insert_hydration(u,c,_),d&&d.m(c,null),o=!0},p(u,_){(!o||_&1)&&set_data(t,u[0]),d&&d.p&&(!o||_&16)&&update_slot_base(d,p,u,u[4],o?get_slot_changes(p,u[4],_,null):get_all_dirty_from_scope(u[4]),null)},i(u){o||(transition_in(d,u),o=!0)},o(u){transition_out(d,u),o=!1},d(u){u&&detach(e),u&&detach(l),u&&detach(i),u&&detach(s),u&&detach(c),d&&d.d(u)}}}function create_fragment$1(n){let e,t;return e=new PopupWrapper({props:{zIndex:999999991,$$slots:{default:[create_default_slot$1]},$$scope:{ctx:n}}}),e.$on("dimissed",n[3]),{c(){create_component(e.$$.fragment)},l(l){claim_component(e.$$.fragment,l)},m(l,i){mount_component(e,l,i),t=!0},p(l,[i]){const r={};i&17&&(r.$$scope={dirty:i,ctx:l}),e.$set(r)},i(l){t||(transition_in(e.$$.fragment,l),t=!0)},o(l){transition_out(e.$$.fragment,l),t=!1},d(l){destroy_component(e,l)}}}function instance$1(n,e,t){let{$$slots:l={},$$scope:i}=e,{title:r}=e;const s=createEventDispatcher(),c=function(o){s("dimissed")};return n.$$set=o=>{"title"in o&&t(0,r=o.title),"$$scope"in o&&t(4,i=o.$$scope)},[r,s,l,c,i]}class TextPopup extends SvelteComponent{constructor(e){super(),init(this,e,instance$1,create_fragment$1,safe_not_equal,{title:0})}}const _page_svelte_svelte_type_style_lang="";function get_each_context(n,e,t){const l=n.slice();return l[39]=e[t],l}function create_if_block_5(n){let e,t;return e=new Loading({}),{c(){create_component(e.$$.fragment)},l(l){claim_component(e.$$.fragment,l)},m(l,i){mount_component(e,l,i),t=!0},i(l){t||(transition_in(e.$$.fragment,l),t=!0)},o(l){transition_out(e.$$.fragment,l),t=!1},d(l){destroy_component(e,l)}}}function create_if_block_3(n){let e,t,l,i=n[10]&&create_if_block_4(n);return t=new DebugConsole({props:{visible:n[11]}}),t.$on("dimissed",n[21]),{c(){i&&i.c(),e=space(),create_component(t.$$.fragment)},l(r){i&&i.l(r),e=claim_space(r),claim_component(t.$$.fragment,r)},m(r,s){i&&i.m(r,s),insert_hydration(r,e,s),mount_component(t,r,s),l=!0},p(r,s){r[10]?i?(i.p(r,s),s[0]&1024&&transition_in(i,1)):(i=create_if_block_4(r),i.c(),transition_in(i,1),i.m(e.parentNode,e)):i&&(group_outros(),transition_out(i,1,1,()=>{i=null}),check_outros());const c={};s[0]&2048&&(c.visible=r[11]),t.$set(c)},i(r){l||(transition_in(i),transition_in(t.$$.fragment,r),l=!0)},o(r){transition_out(i),transition_out(t.$$.fragment,r),l=!1},d(r){i&&i.d(r),r&&detach(e),destroy_component(t,r)}}}function create_if_block_4(n){let e,t;return e=new DebugMenu({}),e.$on("dimissed",n[20]),{c(){create_component(e.$$.fragment)},l(l){claim_component(e.$$.fragment,l)},m(l,i){mount_component(e,l,i),t=!0},p:noop,i(l){t||(transition_in(e.$$.fragment,l),t=!0)},o(l){transition_out(e.$$.fragment,l),t=!1},d(l){destroy_component(e,l)}}}function create_if_block_2(n){let e,t;return e=new TextPopup({props:{title:`What's new in version ${VERSION}`,$$slots:{default:[create_default_slot]},$$scope:{ctx:n}}}),e.$on("dimissed",n[22]),{c(){create_component(e.$$.fragment)},l(l){claim_component(e.$$.fragment,l)},m(l,i){mount_component(e,l,i),t=!0},p(l,i){const r={};i[1]&2048&&(r.$$scope={dirty:i,ctx:l}),e.$set(r)},i(l){t||(transition_in(e.$$.fragment,l),t=!0)},o(l){transition_out(e.$$.fragment,l),t=!1},d(l){destroy_component(e,l)}}}function create_each_block(n){let e,t=n[39]+"",l;return{c(){e=element("li"),l=text(t)},l(i){e=claim_element(i,"LI",{});var r=children(e);l=claim_text(r,t),r.forEach(detach)},m(i,r){insert_hydration(i,e,r),append_hydration(e,l)},p:noop,d(i){i&&detach(e)}}}function create_default_slot(n){let e,t=NEW_FEATS,l=[];for(let i=0;i<t.length;i+=1)l[i]=create_each_block(get_each_context(n,t,i));return{c(){e=element("ul");for(let i=0;i<l.length;i+=1)l[i].c()},l(i){e=claim_element(i,"UL",{});var r=children(e);for(let s=0;s<l.length;s+=1)l[s].l(r);r.forEach(detach)},m(i,r){insert_hydration(i,e,r);for(let s=0;s<l.length;s+=1)l[s].m(e,null)},p(i,r){if(r&0){t=NEW_FEATS;let s;for(s=0;s<t.length;s+=1){const c=get_each_context(i,t,s);l[s]?l[s].p(c,r):(l[s]=create_each_block(c),l[s].c(),l[s].m(e,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=t.length}},d(i){i&&detach(e),destroy_each(l,i)}}}function create_if_block_1(n){let e,t,l,i;return{c(){e=element("sub"),t=text("DEBUG ENABLED"),this.h()},l(r){e=claim_element(r,"SUB",{style:!0});var s=children(e);t=claim_text(s,"DEBUG ENABLED"),s.forEach(detach),this.h()},h(){set_style(e,"user-select","none")},m(r,s){insert_hydration(r,e,s),append_hydration(e,t),l||(i=[listen(e,"mousedown",n[18]),listen(e,"mouseup",n[19]),listen(e,"touchstart",n[18],{passive:!0}),listen(e,"touchend",n[19],{passive:!0})],l=!0)},p:noop,d(r){r&&detach(e),l=!1,run_all(i)}}}function create_if_block(n){let e,t,l,i,r,s,c,o,p;function d(g){n[27](g)}function u(g){n[28](g)}let _={onUpgrade:n[17],title:"Block upgrade"};n[6]!==void 0&&(_.isExpesnive=n[6]),n[0]!==void 0&&(_.upgrade=n[0]),t=new Upgrade({props:_}),binding_callbacks.push(()=>bind(t,"isExpesnive",d)),binding_callbacks.push(()=>bind(t,"upgrade",u));function h(g){n[30](g)}function f(g){n[31](g)}let m={onUpgrade:n[29],title:"Pickaxe upgrade"};return n[8]!==void 0&&(m.isExpesnive=n[8]),n[7]!==void 0&&(m.upgrade=n[7]),s=new Upgrade({props:m}),binding_callbacks.push(()=>bind(s,"isExpesnive",h)),binding_callbacks.push(()=>bind(s,"upgrade",f)),{c(){e=element("div"),create_component(t.$$.fragment),r=space(),create_component(s.$$.fragment),this.h()},l(g){e=claim_element(g,"DIV",{class:!0});var y=children(e);claim_component(t.$$.fragment,y),r=claim_space(y),claim_component(s.$$.fragment,y),y.forEach(detach),this.h()},h(){attr(e,"class","upgrades")},m(g,y){insert_hydration(g,e,y),mount_component(t,e,null),append_hydration(e,r),mount_component(s,e,null),p=!0},p(g,y){const w={};!l&&y[0]&64&&(l=!0,w.isExpesnive=g[6],add_flush_callback(()=>l=!1)),!i&&y[0]&1&&(i=!0,w.upgrade=g[0],add_flush_callback(()=>i=!1)),t.$set(w);const $={};!c&&y[0]&256&&(c=!0,$.isExpesnive=g[8],add_flush_callback(()=>c=!1)),!o&&y[0]&128&&(o=!0,$.upgrade=g[7],add_flush_callback(()=>o=!1)),s.$set($)},i(g){p||(transition_in(t.$$.fragment,g),transition_in(s.$$.fragment,g),p=!0)},o(g){transition_out(t.$$.fragment,g),transition_out(s.$$.fragment,g),p=!1},d(g){g&&detach(e),destroy_component(t),destroy_component(s)}}}function create_fragment(n){let e,t,l=n[13]!==VERSION||Flags.isFlagEnabled("always_show_update_notes")&&!n[12],i,r,s,c=Math.trunc(n[14])+"",o,p,d,u,_,h,f,m,g,y,w,$,C,P,K,D,x,R,j,O,S,V,N,M,F,G,q,A,z,X,L=!n[4]&&create_if_block_5(),I=n[9]&&create_if_block_3(n),B=l&&create_if_block_2(n),v=n[9]&&create_if_block_1(n),U=n[5]&&create_if_block(n);return{c(){L&&L.c(),e=space(),I&&I.c(),t=space(),B&&B.c(),i=space(),r=element("div"),s=element("h1"),o=text(c),p=text(" blocks"),d=space(),u=element("h3"),_=text("x"),h=text(n[15]),f=space(),m=element("h3"),g=text(n[16]),y=text(" bps"),w=space(),v&&v.c(),$=space(),C=element("div"),P=text("Scroll down for upgrades"),K=space(),D=element("div"),x=element("div"),R=element("div"),j=element("img"),O=space(),S=element("div"),V=element("img"),N=space(),M=element("div"),F=element("img"),G=space(),U&&U.c(),q=empty(),this.h()},l(b){L&&L.l(b),e=claim_space(b),I&&I.l(b),t=claim_space(b),B&&B.l(b),i=claim_space(b),r=claim_element(b,"DIV",{class:!0});var E=children(r);s=claim_element(E,"H1",{class:!0});var H=children(s);o=claim_text(H,c),p=claim_text(H," blocks"),H.forEach(detach),d=claim_space(E),u=claim_element(E,"H3",{});var W=children(u);_=claim_text(W,"x"),h=claim_text(W,n[15]),W.forEach(detach),f=claim_space(E),m=claim_element(E,"H3",{});var J=children(m);g=claim_text(J,n[16]),y=claim_text(J," bps"),J.forEach(detach),w=claim_space(E),v&&v.l(E),E.forEach(detach),$=claim_space(b),C=claim_element(b,"DIV",{class:!0});var Y=children(C);P=claim_text(Y,"Scroll down for upgrades"),Y.forEach(detach),K=claim_space(b),D=claim_element(b,"DIV",{class:!0});var Q=children(D);x=claim_element(Q,"DIV",{id:!0});var T=children(x);R=claim_element(T,"DIV",{class:!0});var Z=children(R);j=claim_element(Z,"IMG",{alt:!0,draggable:!0}),Z.forEach(detach),O=claim_space(T),S=claim_element(T,"DIV",{class:!0});var ee=children(S);V=claim_element(ee,"IMG",{alt:!0,draggable:!0}),ee.forEach(detach),N=claim_space(T),M=claim_element(T,"DIV",{class:!0});var te=children(M);F=claim_element(te,"IMG",{alt:!0,draggable:!0}),te.forEach(detach),T.forEach(detach),Q.forEach(detach),G=claim_space(b),U&&U.l(b),q=empty(),this.h()},h(){attr(s,"class","blocks-count"),attr(r,"class","blocks-header"),attr(C,"class","scroll-for-upgrades"),attr(j,"alt",""),attr(j,"draggable","false"),attr(R,"class","right"),attr(V,"alt",""),attr(V,"draggable","false"),attr(S,"class","left"),attr(F,"alt",""),attr(F,"draggable","false"),attr(M,"class","top"),attr(x,"id","block"),attr(D,"class","block-over")},m(b,E){L&&L.m(b,E),insert_hydration(b,e,E),I&&I.m(b,E),insert_hydration(b,t,E),B&&B.m(b,E),insert_hydration(b,i,E),insert_hydration(b,r,E),append_hydration(r,s),append_hydration(s,o),append_hydration(s,p),append_hydration(r,d),append_hydration(r,u),append_hydration(u,_),append_hydration(u,h),append_hydration(r,f),append_hydration(r,m),append_hydration(m,g),append_hydration(m,y),append_hydration(r,w),v&&v.m(r,null),insert_hydration(b,$,E),insert_hydration(b,C,E),append_hydration(C,P),insert_hydration(b,K,E),insert_hydration(b,D,E),append_hydration(D,x),append_hydration(x,R),append_hydration(R,j),n[23](j),append_hydration(x,O),append_hydration(x,S),append_hydration(S,V),n[24](V),append_hydration(x,N),append_hydration(x,M),append_hydration(M,F),n[25](F),insert_hydration(b,G,E),U&&U.m(b,E),insert_hydration(b,q,E),A=!0,z||(X=listen(x,"click",n[26]),z=!0)},p(b,E){b[4]?L&&(group_outros(),transition_out(L,1,1,()=>{L=null}),check_outros()):L?E[0]&16&&transition_in(L,1):(L=create_if_block_5(),L.c(),transition_in(L,1),L.m(e.parentNode,e)),b[9]?I?(I.p(b,E),E[0]&512&&transition_in(I,1)):(I=create_if_block_3(b),I.c(),transition_in(I,1),I.m(t.parentNode,t)):I&&(group_outros(),transition_out(I,1,1,()=>{I=null}),check_outros()),E[0]&12288&&(l=b[13]!==VERSION||Flags.isFlagEnabled("always_show_update_notes")&&!b[12]),l?B?(B.p(b,E),E[0]&12288&&transition_in(B,1)):(B=create_if_block_2(b),B.c(),transition_in(B,1),B.m(i.parentNode,i)):B&&(group_outros(),transition_out(B,1,1,()=>{B=null}),check_outros()),(!A||E[0]&16384)&&c!==(c=Math.trunc(b[14])+"")&&set_data(o,c),(!A||E[0]&32768)&&set_data(h,b[15]),(!A||E[0]&65536)&&set_data(g,b[16]),b[9]?v?v.p(b,E):(v=create_if_block_1(b),v.c(),v.m(r,null)):v&&(v.d(1),v=null),b[5]?U?(U.p(b,E),E[0]&32&&transition_in(U,1)):(U=create_if_block(b),U.c(),transition_in(U,1),U.m(q.parentNode,q)):U&&(group_outros(),transition_out(U,1,1,()=>{U=null}),check_outros())},i(b){A||(transition_in(L),transition_in(I),transition_in(B),transition_in(U),A=!0)},o(b){transition_out(L),transition_out(I),transition_out(B),transition_out(U),A=!1},d(b){L&&L.d(b),b&&detach(e),I&&I.d(b),b&&detach(t),B&&B.d(b),b&&detach(i),b&&detach(r),v&&v.d(),b&&detach($),b&&detach(C),b&&detach(K),b&&detach(D),n[23](null),n[24](null),n[25](null),b&&detach(G),U&&U.d(b),b&&detach(q),z=!1,X()}}}function instance(n,e,t){let l,i,r,s=writable(!1),c=!1,o,p=new LoadingManager(S),d,u=!0,_,h=!0,f=!1,m=!1,g=!1,y,w=!1,$=get_store_value(versionPopupShownForVersion),C=get_store_value(blocks),P=get_store_value(multiplier),K=get_store_value(bps);versionPopupShownForVersion.subscribe(v=>t(13,$=v)),blocks.subscribe(v=>t(14,C=v)),multiplier.subscribe(v=>t(15,P=v)),bps.subscribe(v=>t(16,K=v)),blocks.subscribe(v=>{let U=OtherUpgradeManager.toArbitiaryUpgrade(OtherUpgradeManager.getNextPickUpgrade());t(7,_=U),U&&t(8,h=U.price>v)}),setInterval(()=>{let v=get_store_value(bps)*.005;blocks.update(U=>U+v)},1),s.subscribe(v=>t(4,c=v)),p.startLoading(),blocks.subscribe(v=>{try{document.title=`${Math.trunc(C)} blocks - Block Clicker`,d&&t(6,u=d.price>v||d.namespace==="_null")}catch(U){console.error(U)}});const D={getBlocks:()=>get_store_value(blocks),getMultiplier:()=>get_store_value(multiplier),getBps:()=>get_store_value(bps)},x={setBlocks:v=>blocks.set(v),setMultiplier:v=>multiplier.set(v),setBps:v=>bps.set(v)};function R(v){let U=BlockUpgradeManager.fromArbitiaryBlock(v);o.ApplyBlockUpgrade(U)&&t(0,d=o.GetNextBlockUpgrade()?BlockUpgradeManager.toArbitiaryBlock(o.GetNextBlockUpgradeSure()):void 0),t(0,d)}function j(){window.mobileAndTabletCheck()&&(y=setTimeout(()=>t(10,m=!0),3e3))}function O(){y&&clearTimeout(y)}async function S(){var v,U;s.set(!0),t(9,f=location.hash==="#enable-debug"),window.addEventListener("hashchange",b=>{location.hash==="#enable-debug"?t(9,f=confirm("Enable debug mode?")):t(9,f=!1)}),hotkeys("ctrl+alt+f1, ctrl+alt+f2",function(b,E){switch(b.preventDefault(),console.log(E.key),E.key){case"ctrl+alt+f1":t(10,m=!m);break;case"ctrl+alt+f2":t(11,g=!g);break}}),t(5,o=new BlockUpgradeManager(l,r,i,D,x)),t(0,d=BlockUpgradeManager.toArbitiaryBlock(o.GetNextBlockUpgradeSure())),(v=document.getElementById("block"))==null||v.addEventListener("mouseenter",()=>document.body.setAttribute("noselect","")),(U=document.getElementById("block"))==null||U.addEventListener("mouseleave",()=>document.body.removeAttribute("noselect")),window.addEventListener("beforeunload",b=>{s.set(!1)})}const V=()=>t(10,m=!1),N=()=>t(11,g=!1),M=()=>{versionPopupShownForVersion.set(VERSION),t(12,w=!0)};function F(v){binding_callbacks[v?"unshift":"push"](()=>{i=v,t(2,i)})}function G(v){binding_callbacks[v?"unshift":"push"](()=>{l=v,t(1,l)})}function q(v){binding_callbacks[v?"unshift":"push"](()=>{r=v,t(3,r)})}const A=()=>blocks.update(v=>v+get_store_value(multiplier));function z(v){u=v,t(6,u)}function X(v){d=v,t(0,d)}const L=()=>OtherUpgradeManager.upgradePickToNext();function I(v){h=v,t(8,h)}function B(v){_=v,t(7,_)}return n.$$.update=()=>{n.$$.dirty[0]&1&&console.log("Next block up",d)},[d,l,i,r,c,o,u,_,h,f,m,g,w,$,C,P,K,R,j,O,V,N,M,F,G,q,A,z,X,L,I,B]}class Page extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{},null,[-1,-1])}}export{Page as default};
