import{S as ge,i as de,s as pe,k as h,a as j,l as v,m as E,h as d,c as D,n as a,b as $,F as o,H as ze,A as ne,I as le,q as C,r as x,u as re,J as q,p as ye,e as Ue,f as X,t as se,d as we,v as Ae,w as Ge,x as Fe,y as Ne,K as Ve,L as Le,g as Me}from"../../chunks/index-c6334806.js";import{w as Se}from"../../chunks/index-72e8b35b.js";function Ce(s){return ee.find(e=>e.namespace===s)}const ee=[{namespace:"dirt",textureMode:"all",imageExtension:"jpg",price:0,upgradeValues:{bps:0,multiplier:0}},{namespace:"grass",textureMode:"bottomtop",imageExtension:"jpg",price:50,upgradeValues:{bps:.5,multiplier:.4}},{namespace:"log",textureMode:"bottomtop",imageExtension:"jpg",price:125,upgradeValues:{bps:1,multiplier:1}},{namespace:"stone",textureMode:"all",imageExtension:"jpg",price:200,upgradeValues:{bps:1.5,multiplier:1.3}},{namespace:"cobblestone",textureMode:"all",imageExtension:"jpg",price:450,upgradeValues:{bps:2.4,multiplier:1}}],xe={key:"en-us",language:"English",strings:{"splash-header":"Did you know?"},upgrades:{dirt:{title:"Dirt",description:""},grass:{title:"Grass",description:""},log:{title:"Log",description:""}},splashes:["Click the block!","Hi!"]},He={key:"pl-pl",language:"Polski",strings:{"splash-header":"Czy wiesz \u017Ce?"},upgrades:{dirt:{title:"Ziemia",description:""},grass:{title:"Trawa",description:""},log:{title:"K\u0142oda",description:""}},splashes:["Klikaj w blok!","Witaj!"]};Array.prototype.pick=function(){return this[Math.floor(Math.random()*this.length)]};const fe="en-us";let Ke=fe;const Pe=[He,xe];function Re(s){let e=me().upgrades[s];return e||(e=$e().upgrades[s]),e}function Te(){return me().splashes.pick()}function qe(s,e){let t=me().strings[s];return t||(t=$e().strings[s]),t!=null?t:e}function me(){var s;return(s=ue(Ke))!=null?s:ue(fe)}function $e(){return ue(fe)}function ue(s){return Pe.find(e=>e.key===s)}class Ye extends Error{constructor(e,t){super(e,t),this.name="IllegalStateError"}}const y="/block-clicker";class ce{constructor(e,t,l,c,u){this.blockUpgradeIndex=0,this.left=e,this.top=t,this.right=l,this.getters=c,this.setters=u}static toArbitiaryBlock(e){var l;let t=(l=Re(e.namespace))!=null?l:{title:void 0,description:void 0};return{description:t.description,title:t.title,namespace:e.namespace,icon:"/img/placeholder.png",price:e.price,upgradeValues:e.upgradeValues}}static fromArbitiaryBlock(e){return ee.find(t=>t.namespace===e.namespace)}GetBlockUpgradeIndex(){return this.blockUpgradeIndex}GetBlockUpgrade(){return ee[this.GetBlockUpgradeIndex()]}GetNextBlockUpgrade(){return ee[this.GetBlockUpgradeIndex()+1]}GetNextBlockUpgradeSure(){return this.GetNextBlockUpgrade()}ApplyBlockUpgrade(e){return e&&this.getters.getBlocks()>=e.price?(this.ForceApplyBlockUpgrade(e),!0):!1}ForceApplyBlockUpgrade(e){switch(this.setters.setBlocks(this.getters.getBlocks()-e.price),this.setters.setBps(this.getters.getBps()+e.upgradeValues.bps),this.setters.setMultiplier(this.getters.getMultiplier()+e.upgradeValues.multiplier),e.textureMode){case"all":this.left.src=`${y}/img/blocks/${e.namespace}/all.jpg`,this.top.src=`${y}/img/blocks/${e.namespace}/all.jpg`,this.right.src=`${y}/img/blocks/${e.namespace}/all.jpg`,this.setFavicon(`${y}/img/blocks/${e.namespace}/all.jpg`);break;case"bottomtop":this.left.src=`${y}/img/blocks/${e.namespace}/bottom.jpg`,this.top.src=`${y}/img/blocks/${e.namespace}/top.jpg`,this.right.src=`${y}/img/blocks/${e.namespace}/bottom.jpg`,this.setFavicon(`${y}/img/blocks/${e.namespace}/bottom.jpg`);break;case"sided":this.left.src=`${y}/img/blocks/${e.namespace}/left.jpg`,this.top.src=`${y}/img/blocks/${e.namespace}/top.jpg`,this.right.src=`${y}/img/blocks/${e.namespace}/right.jpg`,this.setFavicon(`${y}/img/blocks/${e.namespace}/left.jpg`);break}if(!Ce(e.namespace))throw new Ye(`Upgrade with namespace "${e.namespace} is not registered`);this.blockUpgradeIndex=ee.findIndex(t=>t.namespace===e.namespace)}setFavicon(e){var t=document.querySelector("link[rel~='icon']");t||(t=document.createElement("link"),t.rel="icon",document.getElementsByTagName("head")[0].appendChild(t)),t.href=e}}function Je(s){let e,t,l,c,u;return{c(){e=h("h1"),t=C(s[2]),l=j(),c=h("div"),u=C("You have reached max level."),this.h()},l(g){e=v(g,"H1",{class:!0});var p=E(e);t=x(p,s[2]),p.forEach(d),l=D(g),c=v(g,"DIV",{});var r=E(c);u=x(r,"You have reached max level."),r.forEach(d),this.h()},h(){a(e,"class","svelte-14vl5cf")},m(g,p){$(g,e,p),o(e,t),$(g,l,p),$(g,c,p),o(c,u)},p(g,p){p&4&&re(t,g[2])},d(g){g&&d(e),g&&d(l),g&&d(c)}}}function Oe(s){let e,t,l,c,u,g=s[0].title+"",p;return{c(){e=h("h1"),t=C(s[2]),l=j(),c=h("div"),u=C("Upgrade to "),p=C(g),this.h()},l(r){e=v(r,"H1",{class:!0});var n=E(e);t=x(n,s[2]),n.forEach(d),l=D(r),c=v(r,"DIV",{});var i=E(c);u=x(i,"Upgrade to "),p=x(i,g),i.forEach(d),this.h()},h(){a(e,"class","svelte-14vl5cf")},m(r,n){$(r,e,n),o(e,t),$(r,l,n),$(r,c,n),o(c,u),o(c,p)},p(r,n){n&4&&re(t,r[2]),n&1&&g!==(g=r[0].title+"")&&re(p,g)},d(r){r&&d(e),r&&d(l),r&&d(c)}}}function We(s){let e,t,l,c,u,g,p;function r(b,k){return b[0]?Oe:Je}let n=r(s),i=n(s);return{c(){e=h("div"),t=h("div"),l=h("img"),c=j(),u=h("div"),i.c(),this.h()},l(b){e=v(b,"DIV",{class:!0});var k=E(e);t=v(k,"DIV",{class:!0});var U=E(t);l=v(U,"IMG",{alt:!0}),U.forEach(d),c=D(k),u=v(k,"DIV",{class:!0});var G=E(u);i.l(G),G.forEach(d),k.forEach(d),this.h()},h(){a(l,"alt","upgrade icon"),a(t,"class","left-side svelte-14vl5cf"),a(u,"class","right-side"),a(e,"class","upgrade svelte-14vl5cf")},m(b,k){$(b,e,k),o(e,t),o(t,l),o(e,c),o(e,u),i.m(u,null),s[5](e),g||(p=ze(e,"click",s[6]),g=!0)},p(b,[k]){n===(n=r(b))&&i?i.p(b,k):(i.d(1),i=n(b),i&&(i.c(),i.m(u,null)))},i:ne,o:ne,d(b){b&&d(e),i.d(),s[5](null),g=!1,p()}}}function Xe(s,e,t){let{upgrade:l}=e,{onUpgrade:c}=e,{title:u=l?l.title:""}=e,{isExpesnive:g=!1}=e,p;function r(i){le[i?"unshift":"push"](()=>{p=i,t(3,p)})}const n=()=>l?c(l):null;return s.$$set=i=>{"upgrade"in i&&t(0,l=i.upgrade),"onUpgrade"in i&&t(1,c=i.onUpgrade),"title"in i&&t(2,u=i.title),"isExpesnive"in i&&t(4,g=i.isExpesnive)},s.$$.update=()=>{s.$$.dirty&25&&p&&(g||!l?p.setAttribute("expensive",""):p.removeAttribute("expensive"))},[l,c,u,p,g,r,n]}class Ze extends ge{constructor(e){super(),de(this,e,Xe,We,pe,{upgrade:0,onUpgrade:1,title:2,isExpesnive:4})}}class Qe{constructor(e,t){this.onFinishLoading=e,this.additionalTasks=t!=null?t:[]}async startLoading(){await new Promise(e=>{var t=setInterval(()=>{try{window!=null&&(clearInterval(t),e(null))}catch(l){let c=l;c.message.includes(" is not defined")||console.error(c)}},5)}),await new Promise(e=>{var t=setInterval(()=>{try{document!=null&&(clearInterval(t),e(null))}catch(l){let c=l;c.message.includes(" is not defined")||console.error(c)}},5)}),await this.sleep(2e3);for(let e=0;e<this.additionalTasks.length;e++){let t=this.additionalTasks[e];await t()}this.onFinishLoading()}async sleep(e){await new Promise(t=>setTimeout(()=>t(null),e))}}function et(s){let e,t,l,c,u,g,p,r,n,i,b,k,U,G,H,I,K,R,T,L,P,W,F,M,m,N,V,z,Y,w,_,f,B=qe("splash-header","header")+"",Z,Q,te=Te()+"",J;return{c(){e=h("div"),t=h("div"),c=j(),u=h("h1"),g=C("Block Clicker"),p=j(),r=h("div"),n=h("div"),i=h("div"),b=h("div"),k=h("img"),G=j(),H=h("div"),I=h("img"),R=j(),T=h("div"),L=h("img"),W=j(),F=h("div"),M=h("img"),N=j(),V=h("div"),z=h("img"),w=j(),_=h("div"),f=h("h1"),Z=C(B),Q=j(),J=C(te),this.h()},l(S){e=v(S,"DIV",{class:!0});var A=E(e);t=v(A,"DIV",{class:!0,src:!0,style:!0});var ie=E(t);ie.forEach(d),c=D(A),u=v(A,"H1",{class:!0});var he=E(u);g=x(he,"Block Clicker"),he.forEach(d),p=D(A),r=v(A,"DIV",{class:!0,style:!0});var ae=E(r);n=v(ae,"DIV",{class:!0});var ve=E(n);i=v(ve,"DIV",{class:!0});var O=E(i);b=v(O,"DIV",{class:!0});var be=E(b);k=v(be,"IMG",{alt:!0,draggable:!0,src:!0,class:!0}),be.forEach(d),G=D(O),H=v(O,"DIV",{class:!0});var ke=E(H);I=v(ke,"IMG",{alt:!0,draggable:!0,src:!0,class:!0}),ke.forEach(d),R=D(O),T=v(O,"DIV",{class:!0});var _e=E(T);L=v(_e,"IMG",{alt:!0,draggable:!0,src:!0,class:!0}),_e.forEach(d),W=D(O),F=v(O,"DIV",{class:!0});var Ee=E(F);M=v(Ee,"IMG",{alt:!0,draggable:!0,src:!0,class:!0}),Ee.forEach(d),N=D(O),V=v(O,"DIV",{class:!0});var Ie=E(V);z=v(Ie,"IMG",{alt:!0,draggable:!0,src:!0,class:!0}),Ie.forEach(d),O.forEach(d),ve.forEach(d),w=D(ae),_=v(ae,"DIV",{class:!0});var oe=E(_);f=v(oe,"H1",{class:!0});var Be=E(f);Z=x(Be,B),Be.forEach(d),Q=D(oe),J=x(oe,te),oe.forEach(d),ae.forEach(d),A.forEach(d),this.h()},h(){a(t,"class","bg-img svelte-1g39z9o"),q(t.src,l=s[5]())||a(t,"src",l),ye(t,"background-image","url("+s[5]()+")"),a(u,"class","header svelte-1g39z9o"),a(k,"alt",""),a(k,"draggable","false"),q(k.src,U=s[2])||a(k,"src",U),a(k,"class","svelte-1g39z9o"),a(b,"class","backright svelte-1g39z9o"),a(I,"alt",""),a(I,"draggable","false"),q(I.src,K=s[3])||a(I,"src",K),a(I,"class","svelte-1g39z9o"),a(H,"class","backleft svelte-1g39z9o"),a(L,"alt",""),a(L,"draggable","false"),q(L.src,P=s[1])||a(L,"src",P),a(L,"class","svelte-1g39z9o"),a(T,"class","right svelte-1g39z9o"),a(M,"alt",""),a(M,"draggable","false"),q(M.src,m=s[0])||a(M,"src",m),a(M,"class","svelte-1g39z9o"),a(F,"class","left svelte-1g39z9o"),a(z,"alt",""),a(z,"draggable","false"),q(z.src,Y=s[4])||a(z,"src",Y),a(z,"class","svelte-1g39z9o"),a(V,"class","top svelte-1g39z9o"),a(i,"class","block-cube svelte-1g39z9o"),a(n,"class","cube-wrapper svelte-1g39z9o"),a(f,"class","svelte-1g39z9o"),a(_,"class","splash svelte-1g39z9o"),a(r,"class","bg svelte-1g39z9o"),ye(r,"--background-image","url("+s[5]()+")"),a(e,"class","bg svelte-1g39z9o")},m(S,A){$(S,e,A),o(e,t),o(e,c),o(e,u),o(u,g),o(e,p),o(e,r),o(r,n),o(n,i),o(i,b),o(b,k),o(i,G),o(i,H),o(H,I),o(i,R),o(i,T),o(T,L),o(i,W),o(i,F),o(F,M),o(i,N),o(i,V),o(V,z),o(r,w),o(r,_),o(_,f),o(f,Z),o(_,Q),o(_,J)},p(S,[A]){A&4&&!q(k.src,U=S[2])&&a(k,"src",U),A&8&&!q(I.src,K=S[3])&&a(I,"src",K),A&2&&!q(L.src,P=S[1])&&a(L,"src",P),A&1&&!q(M.src,m=S[0])&&a(M,"src",m),A&16&&!q(z.src,Y=S[4])&&a(z,"src",Y)},i:ne,o:ne,d(S){S&&d(e)}}}function tt(s,e,t){let l,c,u,g,p,r=ee.filter(i=>i.textureMode!=="sided").pick();function n(){return r.textureMode==="all"?`${y}/img/blocks/${r.namespace}/all.${r.imageExtension}`:`${y}/img/blocks/${r.namespace}/bottom.${r.imageExtension}`}switch(r.textureMode){case"all":l=`${y}/img/blocks/${r.namespace}/all.jpg`,p=`${y}/img/blocks/${r.namespace}/all.jpg`,c=`${y}/img/blocks/${r.namespace}/all.jpg`,u=`${y}/img/blocks/${r.namespace}/all.jpg`,g=`${y}/img/blocks/${r.namespace}/all.jpg`;break;case"bottomtop":l=`${y}/img/blocks/${r.namespace}/bottom.jpg`,p=`${y}/img/blocks/${r.namespace}/top.jpg`,c=`${y}/img/blocks/${r.namespace}/bottom.jpg`,u=`${y}/img/blocks/${r.namespace}/bottom.jpg`,g=`${y}/img/blocks/${r.namespace}/bottom.jpg`;break}return[l,c,u,g,p,n]}class st extends ge{constructor(e){super(),de(this,e,tt,et,pe,{})}}function je(s){let e,t;return e=new st({}),{c(){Ae(e.$$.fragment)},l(l){Ge(e.$$.fragment,l)},m(l,c){Fe(e,l,c),t=!0},i(l){t||(X(e.$$.fragment,l),t=!0)},o(l){se(e.$$.fragment,l),t=!1},d(l){Ne(e,l)}}}function De(s){let e,t,l,c,u;function g(n){s[15](n)}function p(n){s[16](n)}let r={onUpgrade:s[10],title:"Block upgrade"};return s[9]!==void 0&&(r.isExpesnive=s[9]),s[1]!==void 0&&(r.upgrade=s[1]),t=new Ze({props:r}),le.push(()=>Ve(t,"isExpesnive",g)),le.push(()=>Ve(t,"upgrade",p)),{c(){e=h("div"),Ae(t.$$.fragment),this.h()},l(n){e=v(n,"DIV",{class:!0});var i=E(e);Ge(t.$$.fragment,i),i.forEach(d),this.h()},h(){a(e,"class","upgrades")},m(n,i){$(n,e,i),Fe(t,e,null),u=!0},p(n,i){const b={};!l&&i&512&&(l=!0,b.isExpesnive=n[9],Le(()=>l=!1)),!c&&i&2&&(c=!0,b.upgrade=n[1],Le(()=>c=!1)),t.$set(b)},i(n){u||(X(t.$$.fragment,n),u=!0)},o(n){se(t.$$.fragment,n),u=!1},d(n){n&&d(e),Ne(t)}}}function lt(s){let e,t,l,c=Math.trunc(s[0])+"",u,g,p,r,n,i,b,k,U,G,H,I,K,R,T,L,P,W,F,M,m,N,V,z,Y,w=!s[7]&&je(),_=s[8]&&De(s);return{c(){w&&w.c(),e=j(),t=h("div"),l=h("h1"),u=C(c),g=C(" blocks"),p=j(),r=h("h3"),n=C("x"),i=C(s[2]),b=j(),k=h("h3"),U=C(s[3]),G=C(" bps"),H=j(),I=h("div"),K=h("div"),R=h("img"),T=j(),L=h("div"),P=h("img"),W=j(),F=h("div"),M=h("img"),m=j(),_&&_.c(),N=Ue(),this.h()},l(f){w&&w.l(f),e=D(f),t=v(f,"DIV",{class:!0});var B=E(t);l=v(B,"H1",{});var Z=E(l);u=x(Z,c),g=x(Z," blocks"),Z.forEach(d),p=D(B),r=v(B,"H3",{});var Q=E(r);n=x(Q,"x"),i=x(Q,s[2]),Q.forEach(d),b=D(B),k=v(B,"H3",{});var te=E(k);U=x(te,s[3]),G=x(te," bps"),te.forEach(d),B.forEach(d),H=D(f),I=v(f,"DIV",{id:!0});var J=E(I);K=v(J,"DIV",{class:!0});var S=E(K);R=v(S,"IMG",{alt:!0,draggable:!0}),S.forEach(d),T=D(J),L=v(J,"DIV",{class:!0});var A=E(L);P=v(A,"IMG",{alt:!0,draggable:!0}),A.forEach(d),W=D(J),F=v(J,"DIV",{class:!0});var ie=E(F);M=v(ie,"IMG",{alt:!0,draggable:!0}),ie.forEach(d),J.forEach(d),m=D(f),_&&_.l(f),N=Ue(),this.h()},h(){a(t,"class","blocks-header"),a(R,"alt",""),a(R,"draggable","false"),a(K,"class","right"),a(P,"alt",""),a(P,"draggable","false"),a(L,"class","left"),a(M,"alt",""),a(M,"draggable","false"),a(F,"class","top"),a(I,"id","block")},m(f,B){w&&w.m(f,B),$(f,e,B),$(f,t,B),o(t,l),o(l,u),o(l,g),o(t,p),o(t,r),o(r,n),o(r,i),o(t,b),o(t,k),o(k,U),o(k,G),$(f,H,B),$(f,I,B),o(I,K),o(K,R),s[11](R),o(I,T),o(I,L),o(L,P),s[12](P),o(I,W),o(I,F),o(F,M),s[13](M),$(f,m,B),_&&_.m(f,B),$(f,N,B),V=!0,z||(Y=ze(I,"click",s[14]),z=!0)},p(f,[B]){f[7]?w&&(Me(),se(w,1,1,()=>{w=null}),we()):w?B&128&&X(w,1):(w=je(),w.c(),X(w,1),w.m(e.parentNode,e)),(!V||B&1)&&c!==(c=Math.trunc(f[0])+"")&&re(u,c),(!V||B&4)&&re(i,f[2]),(!V||B&8)&&re(U,f[3]),f[8]?_?(_.p(f,B),B&256&&X(_,1)):(_=De(f),_.c(),X(_,1),_.m(N.parentNode,N)):_&&(Me(),se(_,1,1,()=>{_=null}),we())},i(f){V||(X(w),X(_),V=!0)},o(f){se(w),se(_),V=!1},d(f){w&&w.d(f),f&&d(e),f&&d(t),f&&d(H),f&&d(I),s[11](null),s[12](null),s[13](null),f&&d(m),_&&_.d(f),f&&d(N),z=!1,Y()}}}function rt(s,e,t){let l=0,c=1,u=0,g,p,r,n=Se(!1),i=!1,b,k=new Qe(R),U,G=!0;setInterval(()=>{let m=u*.001;t(0,l+=m)},1),n.subscribe(m=>t(7,i=m)),k.startLoading();const H={getBlocks:()=>l,getMultiplier:()=>c,getBps:()=>u},I={setBlocks:m=>t(0,l=m),setMultiplier:m=>t(2,c=m),setBps:m=>t(3,u=m)};function K(m){let N=ce.fromArbitiaryBlock(m);b.ApplyBlockUpgrade(N)&&t(1,U=b.GetNextBlockUpgrade()?ce.toArbitiaryBlock(b.GetNextBlockUpgradeSure()):void 0),t(1,U)}async function R(){var m,N;n.set(!0),t(8,b=new ce(g,r,p,H,I)),b.ForceApplyBlockUpgrade(ee[0]),t(1,U=ce.toArbitiaryBlock(b.GetNextBlockUpgradeSure())),(m=document.getElementById("block"))==null||m.addEventListener("mouseenter",()=>document.body.setAttribute("noselect","")),(N=document.getElementById("block"))==null||N.addEventListener("mouseleave",()=>document.body.removeAttribute("noselect")),window.addEventListener("beforeunload",V=>{n.set(!1)}),window.addEventListener("keyup",V=>{var z;if(console.log("event",V),V.keyCode===79&&V.ctrlKey&&V.shiftKey){let Y=parseFloat((z=prompt("set value"))!=null?z:"");isNaN(Y)||t(0,l=Y)}})}function T(m){le[m?"unshift":"push"](()=>{p=m,t(5,p)})}function L(m){le[m?"unshift":"push"](()=>{g=m,t(4,g)})}function P(m){le[m?"unshift":"push"](()=>{r=m,t(6,r)})}const W=()=>t(0,l+=c);function F(m){G=m,t(9,G),t(0,l),t(1,U)}function M(m){U=m,t(1,U)}return s.$$.update=()=>{s.$$.dirty&2&&console.log("Next block up",U),s.$$.dirty&3&&(()=>{try{document.title=`${l} blocks - Block Clicker`,U&&t(9,G=U.price>l)}catch(m){console.error(m)}})()},[l,U,c,u,g,p,r,i,b,G,K,T,L,P,W,F,M]}class ot extends ge{constructor(e){super(),de(this,e,rt,lt,pe,{})}}export{ot as default};
